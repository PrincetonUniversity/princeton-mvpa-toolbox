<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:p="urn:schemas-microsoft-com:office:powerpoint"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=iso-8859-1">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 9">
<meta name=Originator content="Microsoft Word 9">
<link rel=File-List href="./manual_files/filelist.xml">
<title>Princeton multi-voxel pattern analysis manual</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Greg Detre</o:Author>
  <o:LastAuthor>Greg Detre</o:LastAuthor>
  <o:Revision>66</o:Revision>
  <o:TotalTime>487</o:TotalTime>
  <o:Created>2005-08-31T18:01:00Z</o:Created>
  <o:LastSaved>2005-09-07T22:07:00Z</o:LastSaved>
  <o:Pages>39</o:Pages>
  <o:Words>12827</o:Words>
  <o:Characters>66701</o:Characters>
  <o:Lines>1515</o:Lines>
  <o:Paragraphs>732</o:Paragraphs>
  <o:CharactersWithSpaces>89789</o:CharactersWithSpaces>
  <o:Version>9.2720</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:Zoom>150</w:Zoom>
 </w:WordDocument>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:1627421319 -2147483648 8 0 66047 0;}
 /* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin-top:8.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h1
	{margin-right:0cm;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:1;
	font-size:24.0pt;
	font-family:"Times New Roman";
	mso-font-kerning:18.0pt;
	font-weight:bold;}
h2
	{margin-right:0cm;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:2;
	font-size:18.0pt;
	font-family:"Times New Roman";
	font-weight:bold;}
h3
	{margin-right:0cm;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:3;
	font-size:15.0pt;
	mso-bidi-font-size:13.5pt;
	font-family:"Times New Roman";
	font-weight:bold;}
h4
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:4;
	font-size:13.5pt;
	mso-bidi-font-size:14.0pt;
	font-family:"Times New Roman";
	font-weight:bold;}
h5
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:5;
	font-size:12.0pt;
	mso-bidi-font-size:13.0pt;
	font-family:"Times New Roman";
	font-weight:bold;
	mso-bidi-font-style:italic;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-right:0cm;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{mso-style-update:auto;
	mso-style-next:Normal;
	margin-top:8.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:12.0pt;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{mso-style-update:auto;
	mso-style-next:Normal;
	margin-top:2.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:24.1pt;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoToc4, li.MsoToc4, div.MsoToc4
	{mso-style-update:auto;
	mso-style-next:Normal;
	margin-top:8.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoToc5, li.MsoToc5, div.MsoToc5
	{mso-style-update:auto;
	mso-style-next:Normal;
	margin-top:8.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:48.0pt;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoToc6, li.MsoToc6, div.MsoToc6
	{mso-style-update:auto;
	mso-style-next:Normal;
	margin-top:8.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:60.0pt;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoToc7, li.MsoToc7, div.MsoToc7
	{mso-style-update:auto;
	mso-style-next:Normal;
	margin-top:8.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:72.0pt;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoToc8, li.MsoToc8, div.MsoToc8
	{mso-style-update:auto;
	mso-style-next:Normal;
	margin-top:8.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:84.0pt;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoToc9, li.MsoToc9, div.MsoToc9
	{mso-style-update:auto;
	mso-style-next:Normal;
	margin-top:8.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:96.0pt;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoNormalIndent, li.MsoNormalIndent, div.MsoNormalIndent
	{margin-top:8.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{margin-top:8.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	tab-stops:center 207.65pt right 415.3pt;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoBodyTextIndent, li.MsoBodyTextIndent, div.MsoBodyTextIndent
	{margin-right:0cm;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoBodyTextIndent2, li.MsoBodyTextIndent2, div.MsoBodyTextIndent2
	{margin-right:0cm;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoBodyTextIndent3, li.MsoBodyTextIndent3, div.MsoBodyTextIndent3
	{margin-top:4.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:35.7pt;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	mso-ansi-language:EN-US;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
p.MsoDocumentMap, li.MsoDocumentMap, div.MsoDocumentMap
	{margin-top:8.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	background:navy;
	font-size:12.0pt;
	font-family:Tahoma;
	mso-fareast-font-family:"Times New Roman";}
p
	{margin-right:0cm;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
code
	{mso-ascii-font-family:"Courier New";
	mso-fareast-font-family:"Courier New";
	mso-hansi-font-family:"Courier New";
	mso-bidi-font-family:"Courier New";}
p.Code, li.Code, div.Code
	{mso-style-name:Code;
	mso-style-parent:"Normal \(Web\)";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	border:none;
	mso-border-alt:solid windowtext .25pt;
	padding:0cm;
	mso-padding-alt:6.0pt 3.0pt 6.0pt 3.0pt;
	font-size:10.0pt;
	mso-bidi-font-size:12.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
@page Section1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;
	mso-header-margin:35.4pt;
	mso-footer-margin:35.4pt;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
@list l0
	{mso-list-id:359168660;
	mso-list-type:hybrid;
	mso-list-template-ids:-1015128754 67698703 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l1
	{mso-list-id:938871783;
	mso-list-type:hybrid;
	mso-list-template-ids:2007790350 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l1:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:18.0pt;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;
	font-family:Symbol;}
@list l2
	{mso-list-id:940722991;
	mso-list-type:hybrid;
	mso-list-template-ids:116960344 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l2:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	font-family:Symbol;}
@list l3
	{mso-list-id:1026642807;
	mso-list-type:hybrid;
	mso-list-template-ids:1823403136 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l3:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	font-family:Symbol;}
@list l4
	{mso-list-id:1056706659;
	mso-list-type:hybrid;
	mso-list-template-ids:-1932724306 67698703 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l5
	{mso-list-id:1390616249;
	mso-list-type:hybrid;
	mso-list-template-ids:-1541351018 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l5:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	font-family:Symbol;}
@list l5:level2
	{mso-level-number-format:bullet;
	mso-level-text:o;
	mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	font-family:"Courier New";
	mso-bidi-font-family:"Times New Roman";}
@list l6
	{mso-list-id:1439980651;
	mso-list-type:hybrid;
	mso-list-template-ids:-2103781326 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l6:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	font-family:Symbol;}
@list l7
	{mso-list-id:1731616471;
	mso-list-type:hybrid;
	mso-list-template-ids:864960338 -56846176 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l7:level1
	{mso-level-tab-stop:18.0pt;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;}
@list l8
	{mso-list-id:1879931475;
	mso-list-type:hybrid;
	mso-list-template-ids:1223569202 -56846176 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l8:level1
	{mso-level-tab-stop:53.85pt;
	mso-level-number-position:left;
	margin-left:53.85pt;
	text-indent:-18.0pt;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
</head>

<body lang=EN-GB link=blue vlink=blue style='tab-interval:36.0pt'>

<div class=Section1>

<h1><a name="_Toc111992856"></a><a name="_Toc113346233"></a><a
name="_Toc113785374"></a><a name="_Princeton_multi-voxel_pattern"></a><span
style='mso-bookmark:_Toc111992856'><span style='mso-bookmark:_Toc113346233'><span
style='mso-bookmark:_Toc113785374'>Princeton multi-voxel pattern analysis
manual</span></span></span></h1>

<p class=MsoNormal align=right style='margin-top:2.0pt;mso-margin-bottom-alt:
auto;text-align:right'><a href="http://www.csbmb.princeton.edu/mvpa">http://www.csbmb.princeton.edu/mvpa</a></p>

<p class=MsoNormal style='margin-top:2.0pt;mso-margin-bottom-alt:auto'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<h2><a name="_Toc112582912"></a><a name="_Toc113346234"></a><a
name="_Toc113785375"><span style='mso-bookmark:_Toc113346234'><span
style='mso-bookmark:_Toc112582912'>Table of contents</span></span></a></h2>

<p class=MsoToc1 style='tab-stops:right dotted 414.8pt'><!--[if supportFields]><span
style='mso-element:field-begin'></span><span style="mso-spacerun:
yes">&nbsp;</span>TOC \o &quot;1-3&quot; \h \z <span style='mso-element:field-separator'></span><![endif]--><span
class=MsoHyperlink><a href="#_Toc113785374">Princeton multi-voxel pattern
analysis manual<span style='color:windowtext;display:none;mso-hide:screen;
text-decoration:none;text-underline:none'><span style='mso-tab-count:1 dotted'>. </span><span
style='mso-field-code:"PAGEREF _Toc113785374 \\h"'>1<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300370034000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785375">Table of contents<span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>. </span><span
style='mso-field-code:"PAGEREF _Toc113785375 \\h"'>1<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300370035000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785376"><span lang=EN-US style='mso-ansi-language:
EN-US'>Contact details</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785376 \\h"'>3<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300370036000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785377"><span lang=EN-US style='mso-ansi-language:
EN-US'>Getting started</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>.. </span><span style='mso-field-code:"PAGEREF _Toc113785377 \\h"'>3<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300370037000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785378"><span lang=EN-US style='mso-ansi-language:
EN-US'>What is the toolbox?</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>.. </span><span style='mso-field-code:"PAGEREF _Toc113785378 \\h"'>3<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300370038000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785379"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Sample dataset</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785379 \\h"'>3<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300370039000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785380"><span style='mso-bidi-font-size:
15.0pt'>Tutorial and acccompanying script</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785380 \\h"'>3<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300380030000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785381"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Documentation</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>.. </span><span style='mso-field-code:"PAGEREF _Toc113785381 \\h"'>3<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300380031000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785382"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Scripts</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785382 \\h"'>4<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300380032000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785383"><span style='mso-bidi-font-size:
15.0pt'>Mathworks toolboxes</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785383 \\h"'>4<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300380033000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785384"><span style='mso-bidi-font-size:
15.0pt'>External bundled packages</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785384 \\h"'>4<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300380034000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785385"><span lang=EN-US style='mso-ansi-language:
EN-US'>Data structures</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785385 \\h"'>5<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300380035000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785386"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>1. Patterns</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785386 \\h"'>5<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300380036000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785387"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>2. Regressors</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785387 \\h"'>5<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300380037000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785388"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>3. Selectors</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785388 \\h"'>6<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300380038000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785389"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>4. Masks</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785389 \\h"'>6<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300380039000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785390"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Chronology</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>.. </span><span style='mso-field-code:"PAGEREF _Toc113785390 \\h"'>7<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300390030000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785391"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>The innards of the <i style='mso-bidi-font-style:
normal'>subj</i> structure</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>.. </span><span style='mso-field-code:"PAGEREF _Toc113785391 \\h"'>7<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300390031000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785392"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Accessing the <i style='mso-bidi-font-style:
normal'>subj</i> structure and objects within it</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785392 \\h"'>8<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300390032000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785393"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Viewing the <i style='mso-bidi-font-style:normal'>subj</i>
structure and objects within it</span><span style='color:windowtext;display:
none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785393 \\h"'>9<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300390033000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785394"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Book-keeping and the headers</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>. </span><span
style='mso-field-code:"PAGEREF _Toc113785394 \\h"'>9<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300390034000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785395"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Storing other information</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>.. </span><span
style='mso-field-code:"PAGEREF _Toc113785395 \\h"'>10<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300390035000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785396"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>What&#8217;s the minimum you need to create a <i
style='mso-bidi-font-style:normal'>subj</i> structure?</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>.. </span><span
style='mso-field-code:"PAGEREF _Toc113785396 \\h"'>10<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300390036000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785397"><span style='mso-bidi-font-size:
15.0pt'>Further information</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>.. </span><span style='mso-field-code:"PAGEREF _Toc113785397 \\h"'>10<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300390037000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785398"><span lang=EN-US style='mso-ansi-language:
EN-US'>Importing</span><span style='color:windowtext;display:none;mso-hide:
screen;text-decoration:none;text-underline:none'><span style='mso-tab-count:
1 dotted'>.. </span><span style='mso-field-code:"PAGEREF _Toc113785398 \\h"'>11<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300390038000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785399"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>From AFNI</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785399 \\h"'>11<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003300390039000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785400"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>From BrainVoyager</span><span style='color:
windowtext;display:none;mso-hide:screen;text-decoration:none;text-underline:
none'><span style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:
"PAGEREF _Toc113785400 \\h"'>11<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400300030000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785401"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>From SPM</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>.... </span><span style='mso-field-code:"PAGEREF _Toc113785401 \\h"'>11<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400300031000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785402"><span lang=EN-US style='mso-ansi-language:
EN-US'>Pre-classification</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>.. </span><span style='mso-field-code:"PAGEREF _Toc113785402 \\h"'>11<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400300032000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785403"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Zscoring</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>.. </span><span style='mso-field-code:"PAGEREF _Toc113785403 \\h"'>12<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400300033000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785404"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Anova and voxel selection</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>.. </span><span
style='mso-field-code:"PAGEREF _Toc113785404 \\h"'>12<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400300034000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785405"><span style='mso-bidi-font-size:
15.0pt'>Statmaps</span><span style='color:windowtext;display:none;mso-hide:
screen;text-decoration:none;text-underline:none'><span style='mso-tab-count:
1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785405 \\h"'>12<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400300035000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785406"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Creating your own statmap</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>.. </span><span
style='mso-field-code:"PAGEREF _Toc113785406 \\h"'>13<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400300036000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785407"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Peeking</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>.. </span><span style='mso-field-code:"PAGEREF _Toc113785407 \\h"'>14<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400300037000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785408"><span style='mso-bidi-font-size:
15.0pt'>Further information</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>.. </span><span style='mso-field-code:"PAGEREF _Toc113785408 \\h"'>14<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400300038000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785409"><span lang=EN-US style='mso-ansi-language:
EN-US'>Classification</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>.. </span><span style='mso-field-code:"PAGEREF _Toc113785409 \\h"'>14<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400300039000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785410"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Introduction &#8211; training, testing and
generalization</span><span style='color:windowtext;display:none;mso-hide:screen;
text-decoration:none;text-underline:none'><span style='mso-tab-count:1 dotted'>.. </span><span
style='mso-field-code:"PAGEREF _Toc113785410 \\h"'>14<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400310030000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785411"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Performance</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>.. </span><span style='mso-field-code:"PAGEREF _Toc113785411 \\h"'>15<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400310031000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785412"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Creating your own performance metric function</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>.. </span><span
style='mso-field-code:"PAGEREF _Toc113785412 \\h"'>15<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400310032000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785413"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>N-minus-one (leave-one-out) cross-validation</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>.. </span><span
style='mso-field-code:"PAGEREF _Toc113785413 \\h"'>16<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400310033000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785414"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Backpropagation</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>.. </span><span style='mso-field-code:"PAGEREF _Toc113785414 \\h"'>16<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400310034000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785415"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Included classifiers</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>. </span><span
style='mso-field-code:"PAGEREF _Toc113785415 \\h"'>16<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400310035000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785416"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Creating your own training function</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>.. </span><span
style='mso-field-code:"PAGEREF _Toc113785416 \\h"'>16<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400310036000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785417"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Creating your own testing function</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>.. </span><span
style='mso-field-code:"PAGEREF _Toc113785417 \\h"'>17<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400310037000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785418"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>The results structure</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>.. </span><span
style='mso-field-code:"PAGEREF _Toc113785418 \\h"'>17<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400310038000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785419"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Troubleshooting poor classification performance</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>.. </span><span
style='mso-field-code:"PAGEREF _Toc113785419 \\h"'>18<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400310039000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785420"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Avoiding spurious classification</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>.. </span><span
style='mso-field-code:"PAGEREF _Toc113785420 \\h"'>20<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400320030000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785421"><span style='mso-bidi-font-size:
15.0pt'>Further information</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>.. </span><span style='mso-field-code:"PAGEREF _Toc113785421 \\h"'>20<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400320031000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785422"><span lang=EN-US style='mso-ansi-language:
EN-US'>Exporting</span><span style='color:windowtext;display:none;mso-hide:
screen;text-decoration:none;text-underline:none'><span style='mso-tab-count:
1 dotted'>.. </span><span style='mso-field-code:"PAGEREF _Toc113785422 \\h"'>20<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400320032000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785423"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>To AFNI</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785423 \\h"'>20<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400320033000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785424"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>To BrainVoyager</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785424 \\h"'>20<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400320034000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785425"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>To SPM</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>.... </span><span style='mso-field-code:"PAGEREF _Toc113785425 \\h"'>20<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400320035000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785426"><span lang=EN-US style='mso-ansi-language:
EN-US'>Advanced</span><span style='color:windowtext;display:none;mso-hide:screen;
text-decoration:none;text-underline:none'><span style='mso-tab-count:1 dotted'>.. </span><span
style='mso-field-code:"PAGEREF _Toc113785426 \\h"'>21<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400320036000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785427"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Conventions</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785427 \\h"'>21<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400320037000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785428"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Memory efficiency</span><span style='color:
windowtext;display:none;mso-hide:screen;text-decoration:none;text-underline:
none'><span style='mso-tab-count:1 dotted'>.. </span><span style='mso-field-code:
"PAGEREF _Toc113785428 \\h"'>21<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400320038000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785429"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Moving patterns to the hard disk</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>.. </span><span
style='mso-field-code:"PAGEREF _Toc113785429 \\h"'>21<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400320039000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785430"><span style='mso-bidi-font-size:
15.0pt'>Removing objects</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785430 \\h"'>21<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400330030000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785431"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Accessing the subj structure directly</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>.. </span><span
style='mso-field-code:"PAGEREF _Toc113785431 \\h"'>21<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400330031000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785432"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Figuring out which voxel is which, and where</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>.. </span><span
style='mso-field-code:"PAGEREF _Toc113785432 \\h"'>21<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400330032000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785433"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Handy shortcuts</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785433 \\h"'>21<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400330033000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785434"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Creating custom functions</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>. </span><span
style='mso-field-code:"PAGEREF _Toc113785434 \\h"'>21<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400330034000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785435"><span lang=EN-US style='mso-ansi-language:
EN-US'>Do's and don't's</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785435 \\h"'>21<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400330035000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785436"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Don't access the subj structure directly</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>.. </span><span
style='mso-field-code:"PAGEREF _Toc113785436 \\h"'>21<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400330036000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785437"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Lower-case</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>.. </span><span style='mso-field-code:"PAGEREF _Toc113785437 \\h"'>21<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400330037000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785438"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Be careful with the subj .x shortcuts</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>. </span><span
style='mso-field-code:"PAGEREF _Toc113785438 \\h"'>21<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400330038000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785439"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Recommended early pre-processing</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>.. </span><span
style='mso-field-code:"PAGEREF _Toc113785439 \\h"'>21<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400330039000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785440"><span lang=EN-US style='mso-ansi-language:
EN-US'>Common errors and debugging</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>.. </span><span style='mso-field-code:"PAGEREF _Toc113785440 \\h"'>21<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400340030000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785441"><span style='mso-bidi-font-size:
15.0pt'>??? Error using ==&gt; get_number / No &#8230; object called &#8230;</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>..... </span><span
style='mso-field-code:"PAGEREF _Toc113785441 \\h"'>21<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400340031000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785442"><span lang=EN-US style='mso-ansi-language:
EN-US'>Howto's and occasionally-asked questions</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785442 \\h"'>21<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400340032000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785443"><span lang=EN-US style='mso-bidi-font-size:
15.0pt;mso-ansi-language:EN-US'>Data structures</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span><span style='mso-field-code:"PAGEREF _Toc113785443 \\h"'>21<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400340033000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785444"><span style='mso-bidi-font-size:
15.0pt'>Importing</span><span style='color:windowtext;display:none;mso-hide:
screen;text-decoration:none;text-underline:none'><span style='mso-tab-count:
1 dotted'>.. </span><span style='mso-field-code:"PAGEREF _Toc113785444 \\h"'>21<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400340034000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785445"><span style='mso-bidi-font-size:
15.0pt'>Pre-classification</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>.. </span><span style='mso-field-code:"PAGEREF _Toc113785445 \\h"'>21<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400340035000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785446"><span style='mso-bidi-font-size:
15.0pt'>Classification</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>.. </span><span style='mso-field-code:"PAGEREF _Toc113785446 \\h"'>21<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400340036000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><a href="#_Toc113785447"><span style='mso-bidi-font-size:
15.0pt'>Exporting</span><span style='color:windowtext;display:none;mso-hide:
screen;text-decoration:none;text-underline:none'><span style='mso-tab-count:
1 dotted'>.. </span><span style='mso-field-code:"PAGEREF _Toc113785447 \\h"'>21<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003100310033003700380035003400340037000000</w:data>
</xml><![endif]--></span></span></a></span></p>

<p class=MsoToc3><!--[if supportFields]><span style='mso-element:field-end'></span><![endif]--><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<h2><a name="_Toc111992857"></a><a name="_Toc112582913"></a><a
name="_Toc113346235"></a><a name="_Toc113785376"></a><a name="_Contact_details"></a><span
style='mso-bookmark:_Toc111992857'><span style='mso-bookmark:_Toc112582913'><span
style='mso-bookmark:_Toc113346235'><span style='mso-bookmark:_Toc113785376'><span
lang=EN-US style='mso-ansi-language:EN-US'>Contact details</span></span></span></span></span></h2>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span
lang=EN-US style='mso-ansi-language:EN-US'>See <a
href="http://www.csbmb.princeton.edu/mvpa">http://www.csbmb.princeton.edu/mvpa</a>
to obtain the latest version of the toolbox.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span
lang=EN-US style='mso-ansi-language:EN-US'>Please contact <a
href="mailto:mvpa_support@princeton.edu">mvpa_support@princeton.edu</a> for
more information, suggestions or bug reports. Any feedback is appreciated. We'd
be especially happy to hear from you if you're interested in contributing to
the toolbox in any way.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span
lang=EN-US style='mso-ansi-language:EN-US'>We operate a low-traffic mailing
list for users (<i>mvpa_users@</i>) that announces major releases, and a
higher-traffic mailing list for developers (<i>mvpa_developers@</i>) for those who
wish to keep abreast of the latest changes in the code &#8211; contact <a
href="mailto:mvpa_support@princeton.edu?subject=MVPA%20subscribe%20developers">mvpa_support@princeton.edu</a>
to be added to either list.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<h2><a name="_Toc111992858"></a><a name="_Toc112582914"></a><a
name="_Toc113346236"></a><a name="_Toc113785377"><span style='mso-bookmark:
_Toc113346236'><span style='mso-bookmark:_Toc112582914'><span style='mso-bookmark:
_Toc111992858'><span lang=EN-US style='mso-ansi-language:EN-US'>Getting started</span></span></span></span></a></h2>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span
lang=EN-US style='mso-ansi-language:EN-US'>If you&#8217;re itching to get started,
skim over the <a href="setup.htm">setup and installation guide</a> to get
things set up, and then have a look at <a href="tutorial_easy.htm">tutorial_easy.htm</a>,
which runs through a basic analysis with sample data. This document contains
more detailed information organised by themes.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span
lang=EN-US style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<h2><a name="_Toc113346239"></a><a name="_Toc112582922"></a><a
name="_Toc111992860"></a><a name="_Toc113785378"></a><a name="_Toc112582917"></a><a
name="_Installation"></a><a name="_What_is_the"></a><span style='mso-bookmark:
_Toc113346239'><span style='mso-bookmark:_Toc112582922'><span style='mso-bookmark:
_Toc111992860'><span style='mso-bookmark:_Toc113785378'><span style='mso-bookmark:
_Toc112582917'><span lang=EN-US style='mso-ansi-language:EN-US'>What is the
toolbox?</span></span></span></span></span></span><span style='mso-bookmark:
_Toc112582917'></span></h2>

<h3><span style='mso-bookmark:_Toc112582917'><a name="_Toc113346240"></a><a
name="_Toc113785379"><span style='mso-bookmark:_Toc113346240'><span lang=EN-US
style='mso-ansi-language:EN-US'>Sample dataset</span></span></a></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582917'><span lang=EN-US
style='mso-ansi-language:EN-US'>10 runs from a single subject of Haxby et al.&#8217;s
(Science, 2001) 8-category study.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582917'><span lang=EN-US
style='mso-ansi-language:EN-US'>Note: we have made no efforts to check that the
sample data set is valid or that it has been processed the same way as the
published data. It's included for tutorial purposes only.</span></span></p>

<h3><span style='mso-bookmark:_Toc112582917'><a name="_Toc113346241"></a><a
name="_Toc113785380"><span style='mso-bookmark:_Toc113346241'>Tutorial and
acccompanying script</span></a></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582917'><span lang=EN-US
style='mso-ansi-language:EN-US'>Sample script (</span></span><a
href="m2html/tutorial_easy.html"><span style='mso-bookmark:_Toc112582917'><span
lang=EN-US style='mso-ansi-language:EN-US'>tutorial_easy.m</span></span><span
style='mso-bookmark:_Toc112582917'></span></a><span style='mso-bookmark:_Toc112582917'><span
lang=EN-US style='mso-ansi-language:EN-US'>) that runs a basic analysis of the
Haxby et al. dataset. This is accompanied by a line-by-line description (</span></span><a
href="tutorial_easy.htm"><span style='mso-bookmark:_Toc112582917'><span
lang=EN-US style='mso-ansi-language:EN-US'>tutorial_easy.htm</span></span><span
style='mso-bookmark:_Toc112582917'></span></a><span style='mso-bookmark:_Toc112582917'><span
lang=EN-US style='mso-ansi-language:EN-US'>) of what's going on. This is the
best place to start with the toolbox.</span><span style='color:red'><o:p></o:p></span></span></p>

<h3><span style='mso-bookmark:_Toc112582917'><a name="_Toc113346242"></a><a
name="_Toc113785381"><span style='mso-bookmark:_Toc113346242'><span lang=EN-US
style='mso-ansi-language:EN-US'>Documentation</span></span></a></span><span
style='mso-bookmark:_Toc112582917'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582917'><span lang=EN-US
style='mso-ansi-language:EN-US'>The <i>docs</i> subdirectory includes this
document (</span></span><a href="manual.htm"><span style='mso-bookmark:_Toc112582917'><span
lang=EN-US style='mso-ansi-language:EN-US'>manual.htm</span></span><span
style='mso-bookmark:_Toc112582917'></span></a><span style='mso-bookmark:_Toc112582917'><span
lang=EN-US style='mso-ansi-language:EN-US'>) and </span></span><a
href="glossary.htm"><span style='mso-bookmark:_Toc112582917'><span lang=EN-US
style='mso-ansi-language:EN-US'>glossary</span></span><span style='mso-bookmark:
_Toc112582917'></span></a><span style='mso-bookmark:_Toc112582917'><span
lang=EN-US style='mso-ansi-language:EN-US'>.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582917'><span lang=EN-US
style='mso-ansi-language:EN-US'>It also includes a <i>docs/m2html</i>
subdirectory with </span></span><a href="m2html/index.html"><span
style='mso-bookmark:_Toc112582917'><span lang=EN-US style='mso-ansi-language:
EN-US'>beautified HTML versions</span></span><span style='mso-bookmark:_Toc112582917'></span></a><span
style='mso-bookmark:_Toc112582917'><span lang=EN-US style='mso-ansi-language:
EN-US'> of the scripts themselves.<o:p></o:p></span></span></p>

<h3><span style='mso-bookmark:_Toc112582917'><a name="_Toc113346243"></a><a
name="_Toc113785382"><span style='mso-bookmark:_Toc113346243'><span lang=EN-US
style='mso-ansi-language:EN-US'>Scripts</span></span></a></span><span
style='mso-bookmark:_Toc112582917'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h3>

<h4><span style='mso-bookmark:_Toc112582917'><span lang=EN-US style='mso-ansi-language:
EN-US'>Importing the fMRI data from an analysis package<o:p></o:p></span></span></h4>

<p><span style='mso-bookmark:_Toc112582917'><span lang=EN-US style='mso-ansi-language:
EN-US'>Currently, the toolbox can only import from AFNI, though this should
change soon. See: </span></span><a href="#_Importing"><span style='mso-bookmark:
_Toc112582917'><span lang=EN-US style='mso-ansi-language:EN-US'>importing</span></span><span
style='mso-bookmark:_Toc112582917'></span></a><span style='mso-bookmark:_Toc112582917'><span
lang=EN-US style='mso-ansi-language:EN-US'>.</span><span style='color:red'><o:p></o:p></span></span></p>

<h4><span style='mso-bookmark:_Toc112582917'><span lang=EN-US style='mso-ansi-language:
EN-US'>Pre-classification normalization and feature selection</span></span></h4>

<p><span style='mso-bookmark:_Toc112582917'>Scripts for </span><a
href="#_Zscoring"><span style='mso-bookmark:_Toc112582917'>zscoring the voxel's
timecourse</span><span style='mso-bookmark:_Toc112582917'></span></a><span
style='mso-bookmark:_Toc112582917'> and running a </span><a href="#_Peeking"><span
style='mso-bookmark:_Toc112582917'>no-peeking</span><span style='mso-bookmark:
_Toc112582917'></span></a><span style='mso-bookmark:_Toc112582917'> </span><a
href="#_Anova_voxel_selection"><span style='mso-bookmark:_Toc112582917'>ANOVA
feature selection</span><span style='mso-bookmark:_Toc112582917'></span></a><span
style='mso-bookmark:_Toc112582917'>.</span></p>

<h4><span style='mso-bookmark:_Toc112582917'><span lang=EN-US style='mso-ansi-language:
EN-US'>N-minus-one cross-validation classification</span></span></h4>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582917'><span lang=EN-US
style='mso-ansi-language:EN-US'>Looping over the </span></span><a
href="glossary.htm#_Cross-validation"><span style='mso-bookmark:_Toc112582917'><span
lang=EN-US style='mso-ansi-language:EN-US'>n-minus-one cross-validation</span></span><span
style='mso-bookmark:_Toc112582917'></span></a><span style='mso-bookmark:_Toc112582917'><span
style='mso-ansi-language:EN-US'> </span></span><a href="#_Classification"><span
style='mso-bookmark:_Toc112582917'><span lang=EN-US style='mso-ansi-language:
EN-US'>classification</span></span><span style='mso-bookmark:_Toc112582917'></span></a><span
style='mso-bookmark:_Toc112582917'><span lang=EN-US style='mso-ansi-language:
EN-US'> (training on all but one run of the data, and then testing
generalization to that withheld run). Uses a </span></span><a
href="#_Creating_your_own_4"><span style='mso-bookmark:_Toc112582917'>backpropagation</span><span
style='mso-bookmark:_Toc112582917'></span></a><span style='mso-bookmark:_Toc112582917'>
neural network classifier.</span></p>

<h3><span style='mso-bookmark:_Toc112582917'><a name="_Toc113346244"></a><a
name="_Toc113785383"><span style='mso-bookmark:_Toc113346244'>Mathworks
toolboxes</span></a></span></h3>

<p><span style='mso-bookmark:_Toc112582917'>We use the </span><a
href="http://www.mathworks.com/"><span style='mso-bookmark:_Toc112582917'>Mathworks</span><span
style='mso-bookmark:_Toc112582917'></span></a><span style='mso-bookmark:_Toc112582917'>
toolboxes described below at some points in the toolbox. However, they are not
bundled with the toolbox and must be purchased separately.</span></p>

<h4><span style='mso-bookmark:_Toc112582917'>Statistics</span></h4>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582917'>For </span><a
href="m2html/zscore_runs.html"><span style='mso-bookmark:_Toc112582917'><i>zscore_runs.m</i></span><span
style='mso-bookmark:_Toc112582917'></span></a><span style='mso-bookmark:_Toc112582917'>,
</span><a href="m2html/statmap_anova.html"><span style='mso-bookmark:_Toc112582917'><i>statmap_anova.m</i></span><span
style='mso-bookmark:_Toc112582917'></span></a><span style='mso-bookmark:_Toc112582917'>
and future correlation-based classifiers (not included in this release). We
couldn't find open source alternatives for either of these functions, but they
are fairly easy to implement oneself. We'd be happy to </span><a
href="#_Contact_details"><span style='mso-bookmark:_Toc112582917'>include your
code</span><span style='mso-bookmark:_Toc112582917'></span></a><span
style='mso-bookmark:_Toc112582917'> if you implement either of these in a
future release.</span></p>

<h4><span style='mso-bookmark:_Toc112582917'>Neural networks</span></h4>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582917'>For the </span><a
href="m2html/train_bp.html"><span style='mso-bookmark:_Toc112582917'>train_bp.m</span><span
style='mso-bookmark:_Toc112582917'></span></a><span style='mso-bookmark:_Toc112582917'>
and </span><a href="m2html/test_bp.html"><span style='mso-bookmark:_Toc112582917'>test_bp.m</span><span
style='mso-bookmark:_Toc112582917'></span></a><span style='mso-bookmark:_Toc112582917'>
functions &#8211; see the bundled </span><a href="#_Netlab"><span style='mso-bookmark:
_Toc112582917'>Netlab</span><span style='mso-bookmark:_Toc112582917'></span></a><span
style='mso-bookmark:_Toc112582917'> alternative.</span></p>

<h3><span style='mso-bookmark:_Toc112582917'><a name="_Toc113346245"></a><a
name="_Toc113785384"><span style='mso-bookmark:_Toc113346245'>External bundled
packages</span></a></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582917'>We have been
generously allowed to bundle the following packages by their authors. Although
we have done some minimal testing, we haven't made any serious efforts to
scrutinise their innards &#8211; please </span><a href="#_Contact_details"><span
style='mso-bookmark:_Toc112582917'>let us know</span><span style='mso-bookmark:
_Toc112582917'></span></a><span style='mso-bookmark:_Toc112582917'> if you find
a bug in either, but don't hold us responsible.</span></p>

<h4><span style='mso-bookmark:_Toc112582917'>AFNI-Matlab</span></h4>

<p><span style='mso-bookmark:_Toc112582917'>We rely heavily on </span><a
href="http://afni.nimh.nih.gov/sscc/ziad"><span style='mso-bookmark:_Toc112582917'>Ziad
Saad&#8217;s</span><span style='mso-bookmark:_Toc112582917'></span></a><span
style='mso-bookmark:_Toc112582917'> </span><a
href="http://afni.nimh.nih.gov/afni/matlab"><span style='mso-bookmark:_Toc112582917'>AFNI-Matlab</span><span
style='mso-bookmark:_Toc112582917'></span></a><span style='mso-bookmark:_Toc112582917'>
toolbox for all of the </span><a href="#_From_AFNI"><span style='mso-bookmark:
_Toc112582917'>importing from</span><span style='mso-bookmark:_Toc112582917'></span></a><span
style='mso-bookmark:_Toc112582917'> and </span><a href="#_To_AFNI"><span
style='mso-bookmark:_Toc112582917'>exporting to</span><span style='mso-bookmark:
_Toc112582917'></span></a><span style='mso-bookmark:_Toc112582917'> AFNI.</span></p>

<h4><span style='mso-bookmark:_Toc112582917'><a name="_Netlab"></a>Netlab</span></h4>

<p><span style='mso-bookmark:_Toc112582917'>If you don't have the Mathworks
Neural Networks toolbox, you can use </span><a
href="http://www.ncrg.aston.ac.uk/People/nabneyit/Welcome.html"><span
style='mso-bookmark:_Toc112582917'>Ian Nabney's</span><span style='mso-bookmark:
_Toc112582917'></span></a><span style='mso-bookmark:_Toc112582917'> </span><a
href="http://www.ncrg.aston.ac.uk/netlab/"><span style='mso-bookmark:_Toc112582917'>Netlab
open source neural networks toolbox</span><span style='mso-bookmark:_Toc112582917'></span></a><span
style='mso-bookmark:_Toc112582917'> instead, although </span><a
href="m2html/train_bp_netlab.html"><span style='mso-bookmark:_Toc112582917'><i>train_bp_netlab.m</i></span><span
style='mso-bookmark:_Toc112582917'></span></a><span style='mso-bookmark:_Toc112582917'>
doesn't currently support all of the functionality in </span><a
href="m2html/train_bp.html"><span style='mso-bookmark:_Toc112582917'><i>train_bp.m</i></span><span
style='mso-bookmark:_Toc112582917'></span></a><span style='mso-bookmark:_Toc112582917'>.</span></p>

<span style='mso-bookmark:_Toc112582917'></span>

<p><a name="_Toc111992861"><span lang=EN-US style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></a></p>

<span style='mso-bookmark:_Toc111992861'></span>

<h2><a name="_Toc111992862"></a><a name="_Toc112582925"></a><a
name="_Toc113346248"></a><a name="_Toc113785385"></a><a name="_Data_structure"></a><span
style='mso-bookmark:_Toc111992862'><span style='mso-bookmark:_Toc112582925'><span
style='mso-bookmark:_Toc113346248'><span style='mso-bookmark:_Toc113785385'><span
lang=EN-US style='mso-ansi-language:EN-US'>Data structur</span></span></span></span></span><span
style='mso-bookmark:_Toc113346248'><span style='mso-bookmark:_Toc113785385'><span
lang=EN-US style='mso-ansi-language:EN-US'>es</span></span></span></h2>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span
lang=EN-US style='mso-ansi-language:EN-US'>All the basic information we use for
classification is contained in a single <i style='mso-bidi-font-style:normal'>subj<span
style='mso-bidi-font-style:italic'> </span></i>structure &#8211; one per subject. The
<i>subj</i> structure itself is really just four cell arrays, each containing
multiple objects. An object can be one of four main data types (<a
href="#_1._Patterns">patterns</a>, <a href="#_2._Regressors">regressors</a>, <a
href="#_3._Selectors">selectors</a> and <a href="#_4._Masks">masks</a>). Each
object is stored as a single cell in one of the 4 <i>subj</i> cell arrays. For
instance, a single regressors object is a cell in subj.regressors{}.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span
lang=EN-US style='mso-ansi-language:EN-US'>See <a href="#_The_innards_of">'The
innards of the <i>subj</i> structure'</a> for more details.<o:p></o:p></span></p>

<h3><a name="_Toc112582926"></a><a name="_Toc113346249"></a><a
name="_Toc113785386"></a><a name="_1._Patterns"></a><span style='mso-bookmark:
_Toc112582926'><span style='mso-bookmark:_Toc113346249'><span style='mso-bookmark:
_Toc113785386'><span lang=EN-US style='mso-ansi-language:EN-US'>1. Patterns</span></span></span></span><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>(<i>features
</i>by <i>timepoints</i>) or (<i>features</i> by <i>1</i>)</span></p>

<p class=MsoNormal>This is where the data from the scanner gets stored, which
could take many forms. It might start as raw voxel values, in which case the
dimensions would be voxels by TRs. However, it can also be used to store beta
weights, wavelet coefficients, PCA components etc.</p>

<p class=MsoNormal>Later, the <i style='mso-bidi-font-style:normal'>patterns</i>
are divided into the training data (which the classifier learns from) and
testing data (which it&#8217;s tested on).</p>

<p class=MsoNormal>There is no information about where in the brain a
particular voxel/feature is located &#8211; each <i style='mso-bidi-font-style:normal'>pattern
</i>has an associated <span style='text-transform:uppercase'><a
href="#_Princeton_multi-voxel_pattern"><i style='mso-bidi-font-style:normal'><span
style='text-transform:none'>mask</span></i></a></span> which contains the
information about its contents&#8217; locations.</p>

<p class=MsoNormal>Statmaps and beta weights from GLMs and other statistical
procedures are also stored as <span style='mso-bidi-font-style:italic'>patterns</span>,
although these often do not have time as a second dimension.</p>

<h3><a name="_Toc112582927"></a><a name="_Toc113346250"></a><a
name="_Toc113785387"></a><a name="_2._Regressors"></a><span style='mso-bookmark:
_Toc112582927'><span style='mso-bookmark:_Toc113346250'><span style='mso-bookmark:
_Toc113785387'><span lang=EN-US style='mso-ansi-language:EN-US'>2. Regressors</span></span></span></span><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>(<i>conditions
</i>by <i>timepoints</i>)</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>For our
purposes, the term &#8216;regressors&#8217; refers to a set of values for each TR that
denote the extent to which each condition is active.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>We follow
the AFNI 1D format, where each condition gets its own row, and the active
condition for a given TR is marked with a &#8216;1&#8217;. So in the simplest case, there
would be a 2D matrix with a single &#8216;1&#8217; in each column, corresponding to the
active condition for that timepoint, e.g. &#8216;looking at a face&#8217; vs &#8216;looking at a
house&#8217;. </span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>Consider
this example set of <i style='mso-bidi-font-style:normal'>regressors</i> with 3
conditions and 7 timepoints:<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<table border=1 cellspacing=0 cellpadding=0 width=300 style='width:224.7pt;
 margin-left:-5.4pt;border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-padding-alt:0cm 5.4pt 0cm 5.4pt'>
 <tr>
  <td width=80 valign=top style='width:60.3pt;border:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><![if !supportEmptyParas]>&nbsp;<![endif]><span
  lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></p>
  </td>
  <td width=30 valign=top style='width:22.3pt;border:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><![if !supportEmptyParas]>&nbsp;<![endif]><span
  lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></p>
  </td>
  <td width=189 colspan=7 valign=top style='width:142.1pt;border:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent align=center style='text-align:center'><span
  lang=EN-US style='mso-ansi-language:EN-US'>Time<o:p></o:p></span></p>
  </td>
 </tr>
 <tr>
  <td width=80 valign=top style='width:60.3pt;border:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><![if !supportEmptyParas]>&nbsp;<![endif]><span
  lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></p>
  </td>
  <td width=30 valign=top style='width:22.3pt;border:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><![if !supportEmptyParas]>&nbsp;<![endif]><span
  lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border:none;border-bottom:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>t1<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border:none;border-bottom:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>t2<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border:none;border-bottom:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>t3<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border:none;border-bottom:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>t4<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border:none;border-bottom:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>t5<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border:none;border-bottom:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>t6<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border:none;border-bottom:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>t7<o:p></o:p></span></p>
  </td>
 </tr>
 <tr>
  <td width=80 rowspan=3 style='width:60.3pt;border:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent align=center style='text-align:center'><span
  lang=EN-US style='mso-ansi-language:EN-US'>conditions<o:p></o:p></span></p>
  </td>
  <td width=30 valign=top style='width:22.3pt;border:none;border-right:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>c1<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>1<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>1<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>0<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>0<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>0<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>0<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>0<o:p></o:p></span></p>
  </td>
 </tr>
 <tr>
  <td width=30 valign=top style='width:22.3pt;border:none;border-right:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>c2<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>0<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>0<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>1<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>1<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>0<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>0<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>0<o:p></o:p></span></p>
  </td>
 </tr>
 <tr>
  <td width=30 valign=top style='width:22.3pt;border:none;border-right:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>c3<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>0<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>0<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>0<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>0<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>1<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>1<o:p></o:p></span></p>
  </td>
  <td width=27 valign=top style='width:20.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent><span lang=EN-US style='mso-ansi-language:EN-US'>0<o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>In this
case, the first couple of TRs belong to condition 1, then t3 and t4 belong to
condition 2, and t5 and t6 belong to condition 3. The last timepoint has no
active conditions, i.e. it&#8217;s rest.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>This <i
style='mso-bidi-font-style:normal'>regressors</i> matrix is later fed into the
classifier as the teacher signal that tells it what kind of brain state the
person is in.</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>Rest
conditions can either have their own condition-column, or can be signalled by a
timepoint column with all zeros.</span></p>

<p class=MsoNormal>Usually, there is just a single &#8216;1&#8217; on each row, signalling
one active condition at each timepoint &#8211; however, there is nothing precluding
multiple conditions being active, to greater or lesser degrees.</p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>Sometimes,
we try convolving the <i style='mso-bidi-font-style:normal'>regressors</i> with
a hemodynamic response function. This will almost certainly lead to non-binary
regressors with some TRs having than one condition active at the same time. <o:p></o:p></span></p>

<h3><a name="_Toc112582928"></a><a name="_Toc113346251"></a><a
name="_Toc113785388"></a><a name="_3._Selectors"></a><span style='mso-bookmark:
_Toc112582928'><span style='mso-bookmark:_Toc113346251'><span style='mso-bookmark:
_Toc113785388'><span lang=EN-US style='mso-ansi-language:EN-US'>3. Selectors</span></span></span></span><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>(<i>1</i>
by <i>timepoints</i>)</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>Think of
the <i style='mso-bidi-font-style:normal'>selectors </i>row-vector as
containing &#8216;timelabels&#8217;. They&#8217;re a way to label a particular TR. They could indicate
which run the TR came from, whether it should be used to train or test the
classifier etc.<o:p></o:p></span></p>

<h3><a name="_Toc112582929"></a><a name="_Toc113346252"></a><a
name="_Toc113785389"></a><a name="_4._Masks"></a><span style='mso-bookmark:
_Toc112582929'><span style='mso-bookmark:_Toc113346252'><span style='mso-bookmark:
_Toc113785389'><span lang=EN-US style='mso-ansi-language:EN-US'>4. Masks</span></span></span></span><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>(<i>x</i>
by <i>y</i> by z)<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>A <i
style='mso-bidi-font-style:normal'>mask </i>is usually a single boolean 3D
matrix the size of the original brain volume with ones showing where voxels
will be kept, and zeros showing voxels that will be excluded.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>A <i
style='mso-bidi-font-style:normal'>mask</i> tends to be defined anatomically
(e.g. prefrontal cortex) or functionally by thresholding a <a href="#_statmap">statmap</a>.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>This is
also where the information about the locations of the features (e.g. voxels) in
a <i style='mso-bidi-font-style:normal'>pattern</i> are stored. Every <i
style='mso-bidi-font-style:normal'>pattern </i>has a &#8216;masked_by&#8217; field which
points to a <i style='mso-bidi-font-style:normal'>mask </i>with the same number
of active voxels, showing where in the 3D volume that <i style='mso-bidi-font-style:
normal'>pattern</i>&#8217;s voxels came from.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>To turn the
<i style='mso-bidi-font-style:normal'>mask </i>into a linear index of voxels
that refers to a pattern, just call the Matlab &#8216;find&#8217; command on the <i
style='mso-bidi-font-style:normal'>mask</i>.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>To create a
(<i>voxels </i>x <i>3</i>) list of xyz coordinates, just call the Matlab
&#8216;ind2sub&#8217; command on the <i style='mso-bidi-font-style:normal'>mask</i>.</span></p>

<h3><a name="_Toc112582930"></a><a name="_Toc113346253"></a><a
name="_Toc113785390"><span style='mso-bookmark:_Toc113346253'><span
style='mso-bookmark:_Toc112582930'><span lang=EN-US style='mso-ansi-language:
EN-US'>Chronology</span></span></span></a><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></h3>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span
lang=EN-US style='mso-ansi-language:EN-US'>Notice that the first three data
types have time as the 2nd dimension (columns). The <i style='mso-bidi-font-style:
normal'>mask </i>type doesn&#8217;t incorporate time at all.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span
lang=EN-US style='mso-ansi-language:EN-US'>All of the scripts assume that the <i
style='mso-bidi-font-style:normal'>patterns</i>, <i style='mso-bidi-font-style:
normal'>regressors </i>and <i style='mso-bidi-font-style:normal'>selectors </i>will
be stored in chronological order. Shuffling the temporal order (i.e. the 2nd
dimension) could have unforeseen consequences.<o:p></o:p></span></p>

<h3><a name="_Toc112582931"></a><a name="_Toc113346254"></a><a
name="_Toc113785391"></a><a name="_Toc111992864"></a><a name="_The_innards_of"></a><span
style='mso-bookmark:_Toc112582931'><span style='mso-bookmark:_Toc113346254'><span
style='mso-bookmark:_Toc113785391'><span style='mso-bookmark:_Toc111992864'><span
lang=EN-US style='mso-ansi-language:EN-US'>The innards of the <i
style='mso-bidi-font-style:normal'>subj</i> structure</span></span></span></span></span><span
style='mso-bookmark:_Toc111992864'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><span lang=EN-US
style='mso-ansi-language:EN-US'>All of the data types discussed above are
stored as cell arrays on the main <i style='mso-bidi-font-style:normal'>subj</i>
structure. Each <i style='mso-bidi-font-style:normal'>subj</i> variable is a
Matlab struct containing everything that relates to a single subject (up to the
point of classification). A sample <i style='mso-bidi-font-style:normal'>subj</i>
might look like this, if displayed from the Matlab terminal:<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>&gt;&gt; subj<o:p></o:p></span></code></span></p>

<p><span style='mso-bookmark:_Toc111992864'><code><span style='font-size:10.0pt;
font-family:"Courier New"'>subj = </span></code></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'><span style="mso-spacerun: yes">&nbsp; </span>regressors: {[1x1 struct]}<o:p></o:p></span></code></span></p>

<p class=MsoNormal style='margin-top:0cm'><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'><span style="mso-spacerun: yes">&nbsp;&nbsp; </span>selectors: {[1x1
struct]}<o:p></o:p></span></code></span></p>

<p class=MsoNormal style='margin-top:0cm'><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'><span style="mso-spacerun: yes">&nbsp;&nbsp; </span>patterns: {[1x1
struct]}<o:p></o:p></span></code></span></p>

<p class=MsoNormal style='margin-top:0cm'><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>masks:
{[1x1 struct]}<o:p></o:p></span></code></span></p>

<p class=MsoNormal style='margin-top:0cm'><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>header: [1x1
struct]<o:p></o:p></span></code></span></p>

<p class=MsoNormal style='margin-top:0cm'><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>p: 'raw'<o:p></o:p></span></code></span></p>

<p class=MsoNormal style='margin-top:0cm'><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>m: 'wholebrain'<o:p></o:p></span></code></span></p>

<p class=MsoNormal style='margin-top:0cm'><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>r: 'binaries'<o:p></o:p></span></code></span></p>

<p class=MsoNormal style='margin-top:0cm'><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>s: 'runs'<o:p></o:p></span></code></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><span lang=EN-US
style='mso-ansi-language:EN-US'>Storing the data types as cell arrays within
the subj structure allows us to store multiple <i style='mso-bidi-font-style:
normal'>patterns</i>, multiple <i style='mso-bidi-font-style:normal'>selectors</i>,
multiple <i style='mso-bidi-font-style:normal'>regressors </i>or multiple <i
style='mso-bidi-font-style:normal'>masks</i> at the same time. As we will see, this
is key to the way the toolbox is intended to work.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><span lang=EN-US
style='mso-ansi-language:EN-US'>This display of the <i style='mso-bidi-font-style:
normal'>subj</i> structure is somewhat spare &#8211; we recommend using the </span></span><a
href="m2html/summarise.html"><span style='mso-bookmark:_Toc111992864'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-ansi-language:
EN-US'>summarise.m</span></i></span><span style='mso-bookmark:_Toc111992864'></span></a><span
style='mso-bookmark:_Toc111992864'><i style='mso-bidi-font-style:normal'><span
style='mso-ansi-language:EN-US'> </span></i></span><span style='mso-bookmark:
_Toc111992864'><span lang=EN-US style='mso-ansi-language:EN-US'>function (see </span></span><a
href="#_Viewing_the_subj"><span style='mso-bookmark:_Toc111992864'><span
lang=EN-US style='mso-ansi-language:EN-US'>Viewing the <i style='mso-bidi-font-style:
normal'>subj</i> structure</span></span><span style='mso-bookmark:_Toc111992864'></span></a><span
style='mso-bookmark:_Toc111992864'><span lang=EN-US style='mso-ansi-language:
EN-US'>) instead.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><span lang=EN-US
style='mso-ansi-language:EN-US'>All four data types have a stereotyped internal
organisation. Let us examine a sample <i style='mso-bidi-font-style:normal'>regressors</i>
object:<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>&gt;&gt; subj.regressors{1}<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></code></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>ans = <o:p></o:p></span></code></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>name: 'afni1d'<o:p></o:p></span></code></span></p>

<p class=MsoNormal style='margin-top:0cm'><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'><span style="mso-spacerun: yes">&nbsp; </span>derived_from: ''<o:p></o:p></span></code></span></p>

<p class=MsoNormal style='margin-top:0cm'><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>header:
[1x1 struct]<o:p></o:p></span></code></span></p>

<p class=MsoNormal style='margin-top:0cm'><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>mat: [3x100 double]<o:p></o:p></span></code></span></p>

<p class=MsoNormal style='margin-top:0cm;text-indent:36.0pt'><span
style='mso-bookmark:_Toc111992864'><code><span lang=EN-US style='font-size:
10.0pt;font-family:"Courier New";mso-ansi-language:EN-US'>group_name: ''<o:p></o:p></span></code></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><span lang=EN-US
style='mso-ansi-language:EN-US'>All objects (that is, all <i style='mso-bidi-font-style:
normal'>patterns</i>, <i style='mso-bidi-font-style:normal'>regressors</i>, <i
style='mso-bidi-font-style:normal'>selectors</i> and <i style='mso-bidi-font-style:
normal'>masks</i>) have these required fields:<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:36.0pt'><span style='mso-bookmark:_Toc111992864'><i><span
lang=EN-US style='mso-ansi-language:EN-US'>name</span></i></span><span
style='mso-bookmark:_Toc111992864'><span lang=EN-US style='mso-ansi-language:
EN-US'> &#8211; this is the identifier that is used to refer to that object. Objects
of different types can have the same name, but there can only be one <i
style='mso-bidi-font-style:normal'>regressors</i> object called &#8216;afni1d&#8217;.<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:36.0pt'><span style='mso-bookmark:_Toc111992864'><i><span
lang=EN-US style='mso-ansi-language:EN-US'>mat</span></i></span><span
style='mso-bookmark:_Toc111992864'><span lang=EN-US style='mso-ansi-language:
EN-US'> &#8211; this is where the actual matrix for the object is stored. All 4 data
types have a mat field, though the dimensions will vary (as described in their
respective sections).<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:36.0pt'><span style='mso-bookmark:_Toc111992864'><i><span
lang=EN-US style='mso-ansi-language:EN-US'>header </span></i></span><span
style='mso-bookmark:_Toc111992864'><span lang=EN-US style='mso-ansi-language:
EN-US'>&#8211; this contains book-keeping information describing how the object was
created that might be useful for the user (see </span></span><a
href="#_Book-keeping_and_the"><span style='mso-bookmark:_Toc111992864'><span
lang=EN-US style='mso-ansi-language:EN-US'>Book-keeping</span></span><span
style='mso-bookmark:_Toc111992864'></span></a><span style='mso-bookmark:_Toc111992864'><span
lang=EN-US style='mso-ansi-language:EN-US'>)<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:36.0pt'><span style='mso-bookmark:_Toc111992864'><i><span
lang=EN-US style='mso-ansi-language:EN-US'>derived_from</span></i></span><span
style='mso-bookmark:_Toc111992864'><span lang=EN-US style='mso-ansi-language:
EN-US'> &#8211; when an object is created by duplicating another object, the parent
object is stored here<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:36.0pt'><span style='mso-bookmark:_Toc111992864'><i><span
lang=EN-US style='mso-ansi-language:EN-US'>group_name</span></i></span><span
style='mso-bookmark:_Toc111992864'><span lang=EN-US style='mso-ansi-language:
EN-US'> &#8211; there are various instances where it makes sense to treat multiple
objects as members of a group, such as the multiple selectors that are created
for each iteration of an n-minus-one cross-validation classification. Each
group has a name, that can be used to find all its constituent members. The </span></span><a
href="m2html/find_group.m"><span style='mso-bookmark:_Toc111992864'><span
lang=EN-US style='mso-ansi-language:EN-US'>find_group.m</span></span><span
style='mso-bookmark:_Toc111992864'></span></a><span style='mso-bookmark:_Toc111992864'><span
lang=EN-US style='mso-ansi-language:EN-US'> is an auxiliary function that
returns the names of groupmembers as a cell array.<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:36.0pt'><span style='mso-bookmark:_Toc111992864'><i><span
lang=EN-US style='mso-ansi-language:EN-US'>created</span></i></span><span
style='mso-bookmark:_Toc111992864'><span lang=EN-US style='mso-ansi-language:
EN-US'> &#8211; this contains information about how the object was created, e.g. the
date and time, the name of the function that created it, what arguments were
fed to that function at the time etc. This makes it easy to keep track of
multiple analysis paths in the same <i>subj</i> at once by tracing the creation
history of a given object back, via the arguments fed to the function that
created it.<o:p></o:p></span></span></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span
style='mso-bookmark:_Toc111992864'><a name="_Navigating_the_subj"></a><span
lang=EN-US style='mso-ansi-language:EN-US'>There is a sense in which the
patterns, regressors and selectors could be represented as the same type, since
they are all matrices with time as the second dimension. We made a deliberate
decision to treat them as different types to reflect their different conceptual
roles in the analysis.<o:p></o:p></span></span></p>

<h3><span style='mso-bookmark:_Toc111992864'><a name="_Toc112582932"></a><a
name="_Toc113346255"></a><a name="_Toc113785392"><span style='mso-bookmark:
_Toc113346255'><span style='mso-bookmark:_Toc112582932'><span lang=EN-US
style='mso-ansi-language:EN-US'>Accessing the <i style='mso-bidi-font-style:
normal'>subj</i> structure and objects within it</span></span></span></a></span><span
style='mso-bookmark:_Toc111992864'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><span lang=EN-US
style='mso-ansi-language:EN-US'>The pre-classification steps involved with fMRI
data quickly become labyrinthine. Keeping track of what has been done to the
data, and trying out different analysis paths can easily lead to innumerable
versions of your data strewn around your workspace and hard disk. We have tried
to make the toolbox do as much of this book-keeping as possible. It&#8217;s designed
so that you access all of the objects by name alone, using a collection of
&#8216;accessor&#8217; scripts rather than directly addressing the <i style='mso-bidi-font-style:
normal'>subj</i> structure. This is standard practice in object oriented
programming, but Matlab&#8217;s syntax makes it a little cumbersome to get to grips with
initially.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><span lang=EN-US
style='mso-ansi-language:EN-US'>For instance, rather than typing:<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>&gt;&gt; subj.regressors{1}.mat<o:p></o:p></span></code></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><span lang=EN-US
style='mso-ansi-language:EN-US'>to access the contents of that <i
style='mso-bidi-font-style:normal'>regressors</i> matrix, use:<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>&gt;&gt; get_regressors(subj,&#8217;afni1d&#8217;)<o:p></o:p></span></code></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><span lang=EN-US
style='mso-ansi-language:EN-US'>This will automatically return the matrix of
the <i style='mso-bidi-font-style:normal'>regressors</i> object called
&#8216;afni1d&#8217;. Correspondingly, if you want to modify that <i style='mso-bidi-font-style:
normal'>regressors </i>matrix by setting its first TR to rest, then you would
do the following:<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>&gt;&gt; newmat = get_regressors(subj,&#8217;afni1d&#8217;);<o:p></o:p></span></code></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>&gt;&gt; newmat(:,1) = 0;<o:p></o:p></span></code></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>&gt;&gt; subj = get_regressors(subj,&#8217;afni1d&#8217;,newmat);<o:p></o:p></span></code></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><span lang=EN-US
style='mso-ansi-language:EN-US'>If this strikes you as an inefficient use of
memory, then see </span></span><a href="#_Memory_efficiency"><span
style='mso-bookmark:_Toc111992864'><span lang=EN-US style='mso-ansi-language:
EN-US'>this discussion</span></span><span style='mso-bookmark:_Toc111992864'></span></a><span
style='mso-bookmark:_Toc111992864'><span lang=EN-US style='mso-ansi-language:
EN-US'> for why this isn&#8217;t really a problem.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><span lang=EN-US
style='mso-ansi-language:EN-US'>If you want to access a particular sub-field of
an object, then use the get/set_object_field pair, such as setting the
&#8216;derived_from&#8217; field to whatever is inside &#8216;df_name&#8217;:<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>&gt;&gt; subj =
set_regressors_field(subj,&#8217;afni1d&#8217;,&#8217;derived_from&#8217;,df_name);<o:p></o:p></span></code></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><span lang=EN-US
style='mso-ansi-language:EN-US'>This means that you never need to keep track of
which number <i style='mso-bidi-font-style:normal'>pattern</i> contains your raw
data, and which one contains your zscored data. Give them different and
descriptive names, and just address them like that.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><span lang=EN-US
style='mso-ansi-language:EN-US'>There are a few cases where it seems necessary
to use the <i style='mso-bidi-font-style:normal'>subj</i> structure directly,
e.g. accessing a sub-field of an object. Let us imagine we want to append the
string &#8216;blahblah&#8217; to the end of the header.description. Don&#8217;t ask me why. In
this case, we recommend the following:<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>&gt;&gt; head = get_regressors_field(subj,&#8217;afni1d&#8217;,&#8217;header&#8217;);<o:p></o:p></span></code></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>&gt;&gt; head.description = sprintf(&#8216;%s blah&#8217;,head.description);<o:p></o:p></span></code></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>&gt;&gt; <i style='mso-bidi-font-style:normal'>subj</i> =
set_regressors_field(<i style='mso-bidi-font-style:normal'>subj</i>,&#8217;afni1d&#8217;,&#8217;header&#8217;,head);</span></code></span><span
style='mso-bookmark:_Toc111992864'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><span lang=EN-US
style='mso-ansi-language:EN-US'>Of course, you can always access the <i
style='mso-bidi-font-style:normal'>subj</i> structure directly, and we can&#8217;t
stop you, but doing so could cause unforeseen problems (see </span></span><a
href="#_Accessing_the_subj"><span style='mso-bookmark:_Toc111992864'><span
lang=EN-US style='mso-ansi-language:EN-US'>Accessing the <i style='mso-bidi-font-style:
normal'>subj</i> structure directly</span></span><span style='mso-bookmark:
_Toc111992864'></span></a><span style='mso-bookmark:_Toc111992864'><span
lang=EN-US style='mso-ansi-language:EN-US'>). Adding a layer of abstraction
with the accessor scripts allows us to do lots of error-checking on your
behalf, and occasionally facilitates some useful tricks (e.g. </span></span><a
href="#_Moving_patterns_to"><span style='mso-bookmark:_Toc111992864'><span
lang=EN-US style='mso-ansi-language:EN-US'>transparently storing the data on
the hard disk</span></span><span style='mso-bookmark:_Toc111992864'></span></a><span
style='mso-bookmark:_Toc111992864'><span lang=EN-US style='mso-ansi-language:
EN-US'>).<o:p></o:p></span></span></p>

<h3><span style='mso-bookmark:_Toc111992864'><a name="_Toc112582933"></a><a
name="_Toc113346256"></a><a name="_Toc113785393"></a><a name="_Viewing_the_subj"></a><span
style='mso-bookmark:_Toc112582933'><span style='mso-bookmark:_Toc113346256'><span
style='mso-bookmark:_Toc113785393'><span lang=EN-US style='mso-ansi-language:
EN-US'>Viewing the <i style='mso-bidi-font-style:normal'>subj</i> structure and
objects within it</span></span></span></span></span><span style='mso-bookmark:
_Toc111992864'><span lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><span lang=EN-US
style='mso-ansi-language:EN-US'>Because the output from typing &#8216;subj&#8217; at the
Matlab prompt is not very informative, the <i style='mso-bidi-font-style:normal'>summarise.m
</i>function is intended to provide a more useful readout of your data.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>&gt;&gt; summarise(subj) <o:p></o:p></span></code></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>Subject fred in rosm experiment<o:p></o:p></span></code></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>Patterns - [nVox x nTRs]<o:p></o:p></span></code></span></p>

<p class=MsoNormal style='margin-top:0cm'><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>raw - [50000 x
100]<o:p></o:p></span></code></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>Regressors - [nConds x nTRs]<o:p></o:p></span></code></span></p>

<p class=MsoNormal style='margin-top:0cm'><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>afni1d - [3 x
100]<o:p></o:p></span></code></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>Selectors - [1 x nTRs]<o:p></o:p></span></code></span></p>

<p class=MsoNormal style='margin-top:0cm'><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>runs_all_TRs -
[1 x 1640]<o:p></o:p></span></code></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>Masks - [nVox]<o:p></o:p></span></code></span></p>

<p class=MsoNormal style='margin-top:0cm'><span style='mso-bookmark:_Toc111992864'><code><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>wholebrain -
[64 x 64 x 34]</span></code></span><span style='mso-bookmark:_Toc111992864'><span
lang=EN-US style='mso-ansi-language:EN-US'> <o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><span lang=EN-US
style='mso-ansi-language:EN-US'>This shows that we only have one object of each
type, what their names and the sizes of their internal matrices are.<o:p></o:p></span></span></p>

<h3><span style='mso-bookmark:_Toc111992864'><a name="_Toc112582934"></a><a
name="_Toc113346257"></a><a name="_Toc113785394"></a><a
name="_Book-keeping_and_the"></a><span style='mso-bookmark:_Toc112582934'><span
style='mso-bookmark:_Toc113346257'><span style='mso-bookmark:_Toc113785394'><span
lang=EN-US style='mso-ansi-language:EN-US'>Book-keeping and the headers</span></span></span></span></span><span
style='mso-bookmark:_Toc111992864'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><span lang=EN-US
style='mso-ansi-language:EN-US'>Every object (including the <i
style='mso-bidi-font-style:normal'>subj </i>structure itself) has a <i
style='mso-bidi-font-style:normal'>header</i> field. This is there to store
information about how that object was created, and what processing has been
done to it. All headers contain at least these fields:<o:p></o:p></span></span></p>

<p class=MsoToc4><span style='mso-bookmark:_Toc111992864'><i><span lang=EN-US
style='mso-ansi-language:EN-US'>description</span></i></span><span
style='mso-bookmark:_Toc111992864'><span lang=EN-US style='mso-ansi-language:
EN-US'> &#8211; an optional field that can be used to store a high-level sentence or
two about what the object is for<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:36.0pt'><span style='mso-bookmark:_Toc111992864'><i><span
lang=EN-US style='mso-ansi-language:EN-US'>history</span></i></span><span
style='mso-bookmark:_Toc111992864'><span lang=EN-US style='mso-ansi-language:
EN-US'> &#8211; a cell array of strings that gets automatically appended to by
toolbox scripts, containing a freeform narrative about the object<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:36.0pt'><span style='mso-bookmark:_Toc111992864'><i><span
lang=EN-US style='mso-ansi-language:EN-US'>created</span></i></span><span
style='mso-bookmark:_Toc111992864'><span lang=EN-US style='mso-ansi-language:
EN-US'> &#8211; a structure containing fields such as &#8216;function_name&#8217;, &#8216;patname&#8217; etc.
The toolbox scripts automatically fill these in as a reminder of the time of
creation, which function created the object, any arguments it used to do so,
and which other objects were used by that function.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><span lang=EN-US
style='mso-ansi-language:EN-US'>We find that these header fields can be very
useful in keeping track of complicated analyses with multiple paths, comparing
two paths to see how they differ, and reminding oneself months later about how
a particular <i style='mso-bidi-font-style:normal'>subj </i>structure came to
be. Ensuring that your functions also append to these fields is a good idea.<o:p></o:p></span></span></p>

<h3><span style='mso-bookmark:_Toc111992864'><a name="_Toc112582935"></a><a
name="_Toc113346258"></a><a name="_Toc113785395"><span style='mso-bookmark:
_Toc113346258'><span style='mso-bookmark:_Toc112582935'><span lang=EN-US
style='mso-ansi-language:EN-US'>Storing other information</span></span></span></a></span><span
style='mso-bookmark:_Toc111992864'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><span lang=EN-US
style='mso-ansi-language:EN-US'>There are other kinds of information that might
be worth storing. For instance, we haven&#8217;t explicitly created a data structure
for behavioural data, such as reaction times or errors. We think it would be
most natural to store such data as separate <i style='mso-bidi-font-style:normal'>patterns
</i>objects, even though each <i style='mso-bidi-font-style:normal'>pattern </i>may
contain only a single feature.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><span lang=EN-US
style='mso-ansi-language:EN-US'>There is no explicit provision for
structural/anatomical MRI scans, although these too could be stored as
single-timepoint <i style='mso-bidi-font-style:normal'>patterns</i>.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992864'><span lang=EN-US
style='mso-ansi-language:EN-US'>There is currently no provision in the toolbox
for mapping between data stored at different spatial or temporal resolutions,
though we hope that the book-keeping machinery in the <i style='mso-bidi-font-style:
normal'>subj</i> structure will make life easier for users working in this
area.<o:p></o:p></span></span></p>

<span style='mso-bookmark:_Toc111992864'></span>

<h3><a name="_Toc112582936"></a><a name="_Toc113346259"></a><a
name="_Toc113785396"></a><a name="_Toc111992865"><span style='mso-bookmark:
_Toc113785396'><span style='mso-bookmark:_Toc113346259'><span style='mso-bookmark:
_Toc112582936'><span lang=EN-US style='mso-ansi-language:EN-US'>What&#8217;s the
minimum you need to create a <i style='mso-bidi-font-style:normal'>subj</i>
structure?</span></span></span></span></a><span style='mso-bookmark:_Toc111992865'><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992865'><span lang=EN-US
style='mso-ansi-language:EN-US'>You need:<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-top:4.0pt;margin-right:0cm;margin-bottom:0cm;
margin-left:36.0pt;margin-bottom:.0001pt'><span style='mso-bookmark:_Toc111992865'><span
lang=EN-US style='mso-ansi-language:EN-US'>a dataset in a supported format
(e.g. AFNI or BrainVoyager) that will become the first <i style='mso-bidi-font-style:
normal'>pattern</i><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-top:4.0pt;margin-right:0cm;margin-bottom:0cm;
margin-left:36.0pt;margin-bottom:.0001pt'><span style='mso-bookmark:_Toc111992865'><span
lang=EN-US style='mso-ansi-language:EN-US'>a one-of-n <i style='mso-bidi-font-style:
normal'>regressors</i> matrix stored as a Matlab matrix (or as a txt file that
you can easily load in yourself)<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-top:4.0pt;margin-right:0cm;margin-bottom:0cm;
margin-left:36.0pt;margin-bottom:.0001pt'><span style='mso-bookmark:_Toc111992865'><span
lang=EN-US style='mso-ansi-language:EN-US'>a runs row-vector (or text file)
that will become the first set of <i style='mso-bidi-font-style:normal'>selectors</i><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-top:4.0pt;margin-right:0cm;margin-bottom:0cm;
margin-left:36.0pt;margin-bottom:.0001pt'><span style='mso-bookmark:_Toc111992865'><span
lang=EN-US style='mso-ansi-language:EN-US'>a <i style='mso-bidi-font-style:
normal'>mask</i> to apply to your dataset so that when you load it in with <i
style='mso-bidi-font-style:normal'>load_AFNI_pattern.m</i> (for instance), you
only need to load in the voxels within the cranium</span></span><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></p>

<h3><a name="_Toc113346260"></a><a name="_Toc113785397"><span style='mso-bookmark:
_Toc113346260'>Further information</span></a></h3>

<p class=MsoNormal>For further information, see the <a href="#_Data_structures">Data
structures Howto's and occasionally-asked questions</a>.</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<h2><a name="_Toc113346261"></a><a name="_Toc113785398"></a><a
name="_Toc112582937"></a><a name="_Toc111992869"></a><a name="_Importing"></a><span
style='mso-bookmark:_Toc113346261'><span style='mso-bookmark:_Toc113785398'><span
style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span
lang=EN-US style='mso-ansi-language:EN-US'>Importing</span></span></span></span></span><span
style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></span></span></h2>

<p><span style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span
lang=EN-US style='mso-ansi-language:EN-US'>The idea is that eventually the
toolbox will be able to import from multiple sources into its own Matlab data
structure, and export back in an equally trouble-free manner. For now, only the
AFNI import process works.<o:p></o:p></span></span></span></p>

<p><span style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span
lang=EN-US style='mso-ansi-language:EN-US'>It's worth noting that AFNI is free,
multi-platform and supports the NIfTI-1 data format, which is intended to
facilitate this kind of thing. You might be able to use AFNI as a kind of
bridge from your analysis software to Matlab.<o:p></o:p></span></span></span></p>

<p><span style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span
lang=EN-US style='mso-ansi-language:EN-US'>See also: </span></span></span><a
href="#_Exporting"><span style='mso-bookmark:_Toc112582937'><span
style='mso-bookmark:_Toc111992869'><span lang=EN-US style='mso-ansi-language:
EN-US'>exporting</span></span></span><span style='mso-bookmark:_Toc112582937'><span
style='mso-bookmark:_Toc111992869'></span></span></a><span style='mso-bookmark:
_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span lang=EN-US
style='mso-ansi-language:EN-US'><o:p></o:p></span></span></span></p>

<h3><span style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><a
name="_Toc113346262"></a><a name="_Toc113785399"></a><a name="_From_AFNI"></a><span
style='mso-bookmark:_Toc113346262'><span style='mso-bookmark:_Toc113785399'><span
lang=EN-US style='mso-ansi-language:EN-US'>From AFNI</span></span></span></span></span><span
style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></span></span></h3>

<p><span style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span
lang=EN-US style='mso-ansi-language:EN-US'>See </span></span></span><a
href="load_afni_pattern.html"><span style='mso-bookmark:_Toc112582937'><span
style='mso-bookmark:_Toc111992869'><i><span lang=EN-US style='mso-ansi-language:
EN-US'>load_afni_pattern.m</span></i></span></span><span style='mso-bookmark:
_Toc112582937'><span style='mso-bookmark:_Toc111992869'></span></span></a><span
style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span
lang=EN-US style='mso-ansi-language:EN-US'> and </span></span></span><a
href="m2html/load_afni_mask.html"><span style='mso-bookmark:_Toc112582937'><span
style='mso-bookmark:_Toc111992869'><i><span lang=EN-US style='mso-ansi-language:
EN-US'>load_afni_mask.m</span></i></span></span><span style='mso-bookmark:_Toc112582937'><span
style='mso-bookmark:_Toc111992869'></span></span></a><span style='mso-bookmark:
_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span lang=EN-US
style='mso-ansi-language:EN-US'>, which rely on </span></span></span><a
href="http://afni.nimh.nih.gov/sscc/ziad"><span style='mso-bookmark:_Toc112582937'><span
style='mso-bookmark:_Toc111992869'><span lang=EN-US style='mso-ansi-language:
EN-US'>Ziad Saad's</span></span></span><span style='mso-bookmark:_Toc112582937'><span
style='mso-bookmark:_Toc111992869'></span></span></a><span style='mso-bookmark:
_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span style='mso-ansi-language:
EN-US'> </span></span></span><a href="http://afni.nimh.nih.gov/afni/matlab"><span
style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span
lang=EN-US style='mso-ansi-language:EN-US'>AFNI-Matlab</span></span></span><span
style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'></span></span></a><span
style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span
lang=EN-US style='mso-ansi-language:EN-US'> library.<o:p></o:p></span></span></span></p>

<p><span style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span
lang=EN-US style='mso-ansi-language:EN-US'>In short, the above scripts create a
pattern or mask object and fill it with the contents of a BRIK file (or
multiple BRIKs for patterns). They save the header information in the object's
header field. Then, you're ready to go.<o:p></o:p></span></span></span></p>

<p><span style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span
lang=EN-US style='mso-ansi-language:EN-US'>There is no facility for directly
loading in 1D files, but Matlab's own <i>load</i> command should probably be
sufficient. Just create an object of the right type (with </span></span></span><a
href="m2html/init_object.html"><span style='mso-bookmark:_Toc112582937'><span
style='mso-bookmark:_Toc111992869'><i><span lang=EN-US style='mso-ansi-language:
EN-US'>init_object.m</span></i></span></span><span style='mso-bookmark:_Toc112582937'><span
style='mso-bookmark:_Toc111992869'></span></span></a><span style='mso-bookmark:
_Toc112582937'><span style='mso-bookmark:_Toc111992869'><i><span lang=EN-US
style='mso-ansi-language:EN-US'>) </span></i></span></span><span
style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span
lang=EN-US style='mso-ansi-language:EN-US'>and use </span></span></span><a
href="m2html/set_mat.html"><span style='mso-bookmark:_Toc112582937'><span
style='mso-bookmark:_Toc111992869'><i><span lang=EN-US style='mso-ansi-language:
EN-US'>set_mat.m</span></i></span></span><span style='mso-bookmark:_Toc112582937'><span
style='mso-bookmark:_Toc111992869'></span></span></a><span style='mso-bookmark:
_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span lang=EN-US
style='mso-ansi-language:EN-US'> to insert the loaded-in contents.<o:p></o:p></span></span></span></p>

<p><span style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'></span></span><a
href="#_Contact_details"><span style='mso-bookmark:_Toc112582937'><span
style='mso-bookmark:_Toc111992869'><span lang=EN-US style='mso-ansi-language:
EN-US'>Let us know</span></span></span><span style='mso-bookmark:_Toc112582937'><span
style='mso-bookmark:_Toc111992869'></span></span></a><span style='mso-bookmark:
_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span lang=EN-US
style='mso-ansi-language:EN-US'> if there's any extra functionality you need.<o:p></o:p></span></span></span></p>

<h3><span style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><a
name="_Toc113346263"></a><a name="_Toc113785400"></a><a
name="_From_BrainVoyager"></a><span style='mso-bookmark:_Toc113346263'><span
style='mso-bookmark:_Toc113785400'><span lang=EN-US style='mso-ansi-language:
EN-US'>From BrainVoyager</span></span></span></span></span><span
style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582937'><span
style='mso-bookmark:_Toc111992869'><span lang=EN-US style='mso-ansi-language:
EN-US'>We have a partial implementation of the BrainVoyager import process &#8211; if
it would be useful for you, please </span></span></span><a
href="#_Contact_details"><span style='mso-bookmark:_Toc112582937'><span
style='mso-bookmark:_Toc111992869'><span lang=EN-US style='mso-ansi-language:
EN-US'>contact us</span></span></span><span style='mso-bookmark:_Toc112582937'><span
style='mso-bookmark:_Toc111992869'></span></span></a><span style='mso-bookmark:
_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span lang=EN-US
style='mso-ansi-language:EN-US'> and we can talk about pushing this forward.<o:p></o:p></span></span></span></p>

<h3><span style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><a
name="_Toc113346264"></a><a name="_Toc113785401"></a><a name="_From_SPM"></a><span
style='mso-bookmark:_Toc113346264'><span style='mso-bookmark:_Toc113785401'><span
lang=EN-US style='mso-ansi-language:EN-US'>From SPM</span></span></span></span></span><span
style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></span></span></h3>

<p><span style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span
lang=EN-US style='mso-ansi-language:EN-US'>We've been considering an SPM import
route, and it shouldn't be too hard to implement. If it would be useful for
you, please </span></span></span><a href="#_Contact_details"><span
style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span
lang=EN-US style='mso-ansi-language:EN-US'>contact us</span></span></span><span
style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'></span></span></a><span
style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span
lang=EN-US style='mso-ansi-language:EN-US'> and we can talk about pushing this
forward.<o:p></o:p></span></span></span></p>

<p><span style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><span
lang=EN-US style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></span></p>

<h2><span style='mso-bookmark:_Toc112582937'><span style='mso-bookmark:_Toc111992869'><a
name="_Toc113346265"></a><a name="_Toc113785402"><span style='mso-bookmark:
_Toc113346265'><span lang=EN-US style='mso-ansi-language:EN-US'>Pre-</span></span></a></span></span><span
style='mso-bookmark:_Toc111992869'><span style='mso-bookmark:_Toc113785402'><span
style='mso-bookmark:_Toc113346265'><span lang=EN-US style='mso-ansi-language:
EN-US'>classification</span></span></span></span><span style='mso-bookmark:
_Toc111992869'><span lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></span></h2>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992869'><span lang=EN-US
style='mso-ansi-language:EN-US'>By &#8216;pre-classification&#8217; here, we mean
everything that occurs between importing the data into Matlab (e.g. from AFNI)
and running the classifier on it. Obviously, the basic pre-processing work that
goes on even earlier than this (e.g. motion correction, detrending) is crucial
too, but we only briefly discuss that here.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992869'><span lang=EN-US
style='mso-ansi-language:EN-US'>We have found that the right pre-classification
normalization and and feature selection makes a large difference to classifier
performance.<o:p></o:p></span></span></p>

<h3><span style='mso-bookmark:_Toc111992869'><a name="_Toc112582938"></a><a
name="_Toc113346266"></a><a name="_Toc113785403"></a><a name="_Zscoring"></a><span
style='mso-bookmark:_Toc112582938'><span style='mso-bookmark:_Toc113346266'><span
style='mso-bookmark:_Toc113785403'><span lang=EN-US style='mso-ansi-language:
EN-US'>Zscoring</span></span></span></span></span><span lang=EN-US
style='mso-ansi-language:EN-US'><o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>Usually, we
zscore over time. That is, we take an individual voxel&#8217;s timecourse, and
subtract the mean and divide by its standard deviation, leaving a
linearly-transformed timecourse with mean 0 and standard deviation 1.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>The <i
style='mso-bidi-font-style:normal'>zscore_runs.m</i> included in the toolbox
actually treats each run as a separate timecourse. This was originally designed
to account for possible baseline shifts between runs. <o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>This will
not remove linear or quadratic trends within runs.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>At this
point, the best method of zscoring the data is still unconfirmed. Doing some
kind of zscoring appears to help a great deal with backpropagation and other
classification methods though.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>Requires
the Matlab Statistics toolbox.</span></p>

<h3><a name="_Toc112582939"></a><a name="_Toc113346267"></a><a
name="_Toc113785404"></a><a name="_Anova_voxel_selection"></a><a
name="_Anova_and_voxel"></a><span style='mso-bookmark:_Toc112582939'><span
style='mso-bookmark:_Toc113346267'><span style='mso-bookmark:_Toc113785404'><span
lang=EN-US style='mso-ansi-language:EN-US'>Anova and voxel selection</span></span></span></span><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>If you feed
all of the voxels in the brain into a classifier, performance will be poor,
because many of the voxels will be uninformative. A good classifier will learn
to ignore most of these, but its performance can be greatly facilitated by
excluding all but a few that are likely to contain information.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>The default
voxel selection algorithm in the toolbox is <i><a href="m2html/statmap_anova.m">statmap_anova.m</a></i>.
It operates on each voxel individually, assessing whether that voxel's activity
varies significantly between conditions. To do this, it needs to know which
pattern you want to select features from, a <a href="glossary.htm#_one-of-n">one-of-n</a>
regressors matrix that shows which TRs belong to which conditions, and also a
selectors matrix so that it knows which TRs to use (to avoid <a href="#_Peeking">peeking</a>).
It returns a statmap <i style='mso-bidi-font-style:normal'>pattern</i> which
can then be thresholded with <i style='mso-bidi-font-style:normal'><a
href="m2html/create_thresh_mask.html">create_thresh_mask.m</a></i> to create a
boolean 3D <i style='mso-bidi-font-style:normal'>mask</i>.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>Running
some kind of ANOVA or other voxel selection method tends to help a great deal.
However, it is worth bearing in mind that creating a thresholded mask with a p
threshold of 0.05 could still be allowing through thousands of spurious voxels,
i.e. voxels which pass the anova by chance, and hence will disrupt
generalization to the test data. Making the p threshold stricter makes
statistical sense (though a Bonferroni correction may be too strict). However,
even this may not be the solution if this is partly due to spikes of noise that
make the voxel appear to vary significantly across conditions. Adding runs in
as a factor may help (planned in the future).<o:p></o:p></span></p>

<p style='margin-top:8.0pt;margin-right:0cm;margin-bottom:0cm;margin-left:0cm;
margin-bottom:.0001pt'>All of the discussion above centres on choosing voxels.
However, your patterns could equally contain principal components, wavelet
coefficients or stockmarket prices &#8211; the principle idea that you need to
exclude uninformative features still holds, and an ANOVA should still work
reasonably well.</p>

<p class=MsoNormal>Note: <i>statmap_anova.m</i> requires the Matlab <a
href="http://www.mathworks.com/products/statistics/">Statistics toolbox</a>.</p>

<h3><a name="_Toc113346268"></a><a name="_Toc113785405"><span style='mso-bookmark:
_Toc113346268'>Statmaps</span></a></h3>

<p class=MsoNormal style='margin-top:4.0pt'><span lang=EN-US style='mso-ansi-language:
EN-US'>The result of some kind of statistical test, usually performed
separately for each voxel. For instance, the ANOVA yields a statmap of p
values, one for each voxel. Each p value denotes the probability that that
voxel varies significantly between conditions.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:4.0pt'><span lang=EN-US style='mso-ansi-language:
EN-US'>Statmaps are stored as patterns (<i>nActiveVox</i> x <i>1</i>). We
considered storing statmaps as mask objects, but we decided that the term
&#8216;mask&#8217; is usually used to refer to a boolean 3D volume, and so it would be
confusing to store a continuous values in an object called 'mask'.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:4.0pt'><span lang=EN-US style='mso-ansi-language:
EN-US'>A mask can be created from a statmap by choosing all the voxels that are
above/below some threshold using the <i><a href="m2html/create_thresh_mask.html">create_thresh_mask.m</a></i>.<o:p></o:p></span></p>

<h3><a name="_Toc113346269"></a><a name="_Toc113785406"></a><a
name="_Creating_your_own"></a><span style='mso-bookmark:_Toc113346269'><span
style='mso-bookmark:_Toc113785406'><span lang=EN-US style='mso-ansi-language:
EN-US'>Creating your own statmap</span></span></span><span lang=EN-US
style='mso-ansi-language:EN-US'><o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>If you want
to create your own statmap, start by looking at the default <a
href="m2html/statmap_anova.m">statmap_anova.m</a>, and the <a
href="m2html/statmap_template.html">statmap_template.m</a> template.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>Also, see
the <a href="#_Requirements_for_custom">requirements for custom functions that
modify the subj structure</a>.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>Here are
the requirements, based on <i>statmap_anova.m</i>:<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt;text-indent:-18.0pt;mso-list:l1 level1 lfo2;
tab-stops:list 18.0pt'><![if !supportLists]><span lang=EN-US style='font-family:
Symbol;mso-ansi-language:EN-US'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span lang=EN-US style='mso-ansi-language:EN-US'>returns
the modified <i>subj</i> structure<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt;text-indent:-18.0pt;mso-list:l1 level1 lfo2;
tab-stops:list 18.0pt'><![if !supportLists]><span lang=EN-US style='font-family:
Symbol;mso-ansi-language:EN-US'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span lang=EN-US style='mso-ansi-language:EN-US'>takes
in a <i>subj</i> structure argument<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt;text-indent:-18.0pt;mso-list:l1 level1 lfo2;
tab-stops:list 18.0pt'><![if !supportLists]><span lang=EN-US style='font-family:
Symbol;mso-ansi-language:EN-US'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span lang=EN-US style='mso-ansi-language:EN-US'>takes
in a pattern name argument (<i>data_patname</i>) whose features you want to
select from<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt;text-indent:-18.0pt;mso-list:l1 level1 lfo2;
tab-stops:list 18.0pt'><![if !supportLists]><span lang=EN-US style='font-family:
Symbol;mso-ansi-language:EN-US'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span lang=EN-US style='mso-ansi-language:EN-US'>takes
in a regressors name argument (<i>regsname</i>), which you want to use to
decide whether features are significant &#8211; all conditions get used<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt;text-indent:-18.0pt;mso-list:l1 level1 lfo2;
tab-stops:list 18.0pt'><![if !supportLists]><span lang=EN-US style='font-family:
Symbol;mso-ansi-language:EN-US'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span lang=EN-US style='mso-ansi-language:EN-US'>takes
in a selector name argument (<i>selname)</i> to determine which TRs from the
pattern should be employed &#8211; the <i>statmap_anova.m</i> only uses 1s. 2s mark
the withheld testing run. 3s are reserved for validation vectors and 0s for
rest. Use a code value besides these if you need your selectors to highlight
other subsets of timepoints<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt;text-indent:-18.0pt;mso-list:l1 level1 lfo2;
tab-stops:list 18.0pt'><![if !supportLists]><span lang=EN-US style='font-family:
Symbol;mso-ansi-language:EN-US'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span lang=EN-US style='mso-ansi-language:EN-US'>takes
in a string argument to name the new statmap pattern that will be created (<i>new_map_patname</i>)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt;text-indent:-18.0pt;mso-list:l1 level1 lfo2;
tab-stops:list 18.0pt'><![if !supportLists]><span lang=EN-US style='font-family:
Symbol;mso-ansi-language:EN-US'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span lang=EN-US style='mso-ansi-language:EN-US'>takes
in a bonus argument <i>extra_arg</i> that you can use for any extra arguments
that you need<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt;text-indent:-18.0pt;mso-list:l1 level1 lfo2;
tab-stops:list 18.0pt'><![if !supportLists]><span lang=EN-US style='font-family:
Symbol;mso-ansi-language:EN-US'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span lang=EN-US style='mso-ansi-language:EN-US'>it
should create a new statmap pattern object called <i>new_map_patname</i> (and
describe this in the help comments)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt;text-indent:-18.0pt;mso-list:l1 level1 lfo2;
tab-stops:list 18.0pt'><![if !supportLists]><span lang=EN-US style='font-family:
Symbol;mso-ansi-language:EN-US'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span lang=EN-US style='mso-ansi-language:EN-US'>add
any <i>extra_arg</i> information to the <i>created</i> field (see the call to <i>add_created.m</i>
in <i>zscores_run.m</i>, for example)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt;text-indent:-18.0pt;mso-list:l1 level1 lfo2;
tab-stops:list 18.0pt'><![if !supportLists]><span lang=EN-US style='font-family:
Symbol;mso-ansi-language:EN-US'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span lang=EN-US style='mso-ansi-language:EN-US'>there's
no need for it to display to the terminal, because the caller function (e.g. <i>feature_select.m</i>)
should do that for you<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt;text-indent:-18.0pt;mso-list:l1 level1 lfo2;
tab-stops:list 18.0pt'><![if !supportLists]><span lang=EN-US style='font-family:
Symbol;mso-ansi-language:EN-US'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span lang=EN-US style='mso-ansi-language:EN-US'>adds a
description sentence to the header.history cell array for future reference<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>If you
think these restrictions are too strict and don't fit with a statmap function
that you might want to use, you could either ignore the arguments you don't
need, or <a href="#_Contact_details">let us know</a> and we'll consider
modifying the interface.<o:p></o:p></span></p>

<h3><a name="_Toc111992870"></a><a name="_Toc112582940"></a><a
name="_Toc113346270"></a><a name="_Toc113785407"></a><a name="_Peeking"></a><span
style='mso-bookmark:_Toc111992870'><span style='mso-bookmark:_Toc112582940'><span
style='mso-bookmark:_Toc113346270'><span style='mso-bookmark:_Toc113785407'><span
lang=EN-US style='mso-ansi-language:EN-US'>Peeking</span></span></span></span></span><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>Peeking is
when you use your testing data set to help with voxel selection. Basically,
this is a kind of cheating, and spuriously/illegitimately improves your
classification by some margin.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>The toolbox
makes it easy to avoid peeking. Run <i style='mso-bidi-font-style:normal'><a
href="m2html/create_runminusone_indices.html">create_runminusone_indices.m</a></i>
to create a group of <i style='mso-bidi-font-style:normal'>selectors</i>, one
for each iteration of your n-minus-one cross-validation. Then call <i><a
href="m2html/feature_select.html">feature_select.m</a></i>, which in turn calls
<i style='mso-bidi-font-style:normal'>statmap_anova.m</i> (or any other voxel
selection method) multiple times, once per iteration, using a different subset
of the <i style='mso-bidi-font-style:normal'>pattern</i> data each time. This
will yield a group of <i style='mso-bidi-font-style:normal'>masks</i>, the same
size as the group of <i style='mso-bidi-font-style:normal'>selectors</i>, which
can then be used to restrict which voxels get fed to the classifier separately
for each iteration of the n-minus-one.<o:p></o:p></span></p>

<p style='margin-top:8.0pt;margin-right:0cm;margin-bottom:0cm;margin-left:0cm;
margin-bottom:.0001pt'>Using the same group of <i style='mso-bidi-font-style:
normal'>selectors</i> for both voxel selection and classification ensures that
a TR cannot simultaneously be part of the voxel selection training data <i>and</i>
be part of the withheld testing data.</p>

<p style='margin-top:8.0pt;margin-right:0cm;margin-bottom:0cm;margin-left:0cm;
margin-bottom:.0001pt'>It is possible to circumvent this anti-peeking machinery
by calling <i style='mso-bidi-font-style:normal'><a
href="m2html/statmap_anova.html">statmap_anova.m</a></i> directly with <i
style='mso-bidi-font-style:normal'><a href="m2html/peek_anova.html">peek_anova.m</a></i>,
but obviously this is not recommended for any analysis that is intended for
publication.</p>

<p style='margin-top:8.0pt;margin-right:0cm;margin-bottom:0cm;margin-left:0cm;
margin-bottom:.0001pt'>To see how peeking can artificially boost your
performance, try <a href="#_Avoiding_spurious_classification">scrambling your
regressors</a> using <i><a href="m2html/scramble_regressors.html">scramble_regressors.m</a></i>.</p>

<h3><a name="_Toc113346271"></a><a name="_Toc113785408"><span style='mso-bookmark:
_Toc113346271'>Further information</span></a></h3>

<p class=MsoNormal>For further information, see the <a
href="#_Pre-classification">Pre-classification Howto's and occasionally-asked
questions</a>.</p>

<h2><a name="_Toc112582941"></a><a name="_Toc113346272"></a><a
name="_Toc113785409"></a><a name="_Toc111992868"></a><a name="_Classification"></a><span
style='mso-bookmark:_Toc112582941'><span style='mso-bookmark:_Toc113346272'><span
style='mso-bookmark:_Toc113785409'><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>Classification</span></span></span></span></span><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h2>

<h3><span style='mso-bookmark:_Toc111992868'><a name="_Toc113346273"></a><a
name="_Toc113785410"><span style='mso-bookmark:_Toc113346273'><span lang=EN-US
style='mso-ansi-language:EN-US'>Introduction &#8211; training, testing and
generalization</span></span></a></span><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>In the machine learning sense, classification
means taking a labelled training data set and showing the classifier algorithm
examples of each condition over and over until it can successfully identify the
training data. Then, the classifier&#8217;s generalization performance is tested by
asking it to guess the conditions of new, unseen data points.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>In terms of fMRI experiments, this amounts to a
very simple kind of mind-reading &#8211; being able to tell something about what the
subject was thinking about at a given moment by looking at the activity in
their brain, based on how their brain looked in the past when thinking about
similar kinds of things. In practice, it only tends to work for making very
crude guesses about the kind of task being performed, or stimuli being viewed.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>The way we tend to test this is to train on
most of the data, and then test our classifier's generalization performance on
the remainder. By training, we mean showing it lots of examples of that
person's brain when in condition A, and telling it each time, 'This is an
example of the brain in condition A'. We then show it lots of examples of the
same brain in condition B, also telling it which condition these brain examples
came from. <o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>For instance, we might train the classifier on
examples from runs 1-9 of a 10-run experiment, and then see whether it guesses
correctly when faced with data from run 10.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></p>

<h3><span style='mso-bookmark:_Toc111992868'><a name="_Toc113346274"></a><a
name="_Toc113785411"></a><a name="_Performance"></a><span style='mso-bookmark:
_Toc113346274'><span style='mso-bookmark:_Toc113785411'><span lang=EN-US
style='mso-ansi-language:EN-US'>Performance</span></span></span></span><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>The performance metric measures the similarity
between the output produced by a classifier to the output it's supposed to
produce.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>The simplest performance metric for
classification is to ask whether the maximally-active category unit from the
classifier corresponds to the maximally (or only) active condition in the
regressors/targets. If so, that timepoint is 'correct', otherwise it's 'wrong'.
This is all that the </span></span><a href="m2html/perfmet_maxclass.html"><span
style='mso-bookmark:_Toc111992868'><i><span lang=EN-US style='mso-ansi-language:
EN-US'>perfmet_maxclass.m</span></i></span><span style='mso-bookmark:_Toc111992868'></span></a><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'> performance metric function does.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>Another performance metric that's often used in
Neural Networks is the mean squared error.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>There are many alternative and more
sophisticated ways of evaluating performance.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>See '</span></span><a
href="#_Creating_your_own_3"><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>Creating your own performance metric
function</span></span><span style='mso-bookmark:_Toc111992868'></span></a><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>' if you don't want to use <i>perfmet_maxclass.m</i>.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></p>

<h3><span style='mso-bookmark:_Toc111992868'><a name="_Toc113346275"></a><a
name="_Toc113785412"></a><a name="_Creating_your_own_3"></a><span
style='mso-bookmark:_Toc113346275'><span style='mso-bookmark:_Toc113785412'><span
lang=EN-US style='mso-ansi-language:EN-US'>Creating your own performance metric
function</span></span></span></span><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>If you want to create your own performanc
metric, start by looking at the default </span></span><a
href="m2html/perfmet_maxclass.html"><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>perfmet_maxclass.m</span></span><span
style='mso-bookmark:_Toc111992868'></span></a><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>, and the </span></span><a
href="m2html/perfmet_template.html"><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>perfmet_template.m</span></span><span
style='mso-bookmark:_Toc111992868'></span></a><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'> template.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>Here are the requirementss:<o:p></o:p></span></span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal style='mso-list:l6 level1 lfo5;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
     EN-US'>Should take in a (nOutputUnits x nTimepoints) <i>acts</i> matrix of
     responses from the testing function<o:p></o:p></span></span></li>
 <li class=MsoNormal style='mso-list:l6 level1 lfo5;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
     EN-US'>Should take in a (nOutputUnits x nTimepoints) <i>targs</i> matrix
     of desired responses (supervised labels)<o:p></o:p></span></span></li>
 <li class=MsoNormal style='mso-list:l6 level1 lfo5;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc111992868'><i><span lang=EN-US style='mso-ansi-language:
     EN-US'>Args</span></i></span><span style='mso-bookmark:_Toc111992868'><span
     lang=EN-US style='mso-ansi-language:EN-US'> can contain any further
     information your custom perfmet function requires<o:p></o:p></span></span></li>
 <li class=MsoNormal style='mso-list:l6 level1 lfo5;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
     EN-US'>Should return a <i>perfmet</i> structure that has a <i>perf</i>
     scalar field containing the overall performance according to your
     performance metric. Any other information that might be useful later can
     be stored in the <i>perfmet</i> structure.<o:p></o:p></span></span></li>
</ul>

<p><span style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></p>

<h3><span style='mso-bookmark:_Toc111992868'><a name="_Toc112582942"></a><a
name="_Toc113346276"></a><a name="_Toc113785413"></a><a
name="_N-minus-one_(leave-one-out)_cross-valid"></a><span style='mso-bookmark:
_Toc112582942'><span style='mso-bookmark:_Toc113346276'><span style='mso-bookmark:
_Toc113785413'><span lang=EN-US style='mso-ansi-language:EN-US'>N-minus-one
(leave-one-out) cross-validation</span></span></span></span></span><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>The method of training on most of the data and
generalization-testing on the remainder is somewhat wasteful and potentially
misleading. It could be that generalization performance for a particular run is
very good or very bad. So you might want to try withholding a different run for
testing, and training on the remainder, using a fresh classifier, to see
whether the same kind of performance is obtained.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>N-minus-one (leave-one-out) cross-validation is
really just that idea taken to its extreme. If we have 10 runs, then we will
run 10 separate classifiers, each one being generalization-tested on a
different 1/10 of the data having been trained on the remaining 9/10. This way,
every timepoint gets a turn at being part of the test set, and 9 turns at being
part of the training set.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>The toolbox is set up to make this kind of
procedure very easy<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'><span style="mso-spacerun: yes">&nbsp;</span><a
name="_Toc112582943"></a><a name="_Creating_your_own_1"></a><span
style='mso-bookmark:_Toc112582943'><o:p></o:p></span></span></span></p>

<h3><span style='mso-bookmark:_Toc111992868'><span style='mso-bookmark:_Toc112582943'><a
name="_Toc113346277"></a><a name="_Toc113785414"></a><a
name="_Creating_your_own_4"></a><a name="_Backpropagation"></a><span
style='mso-bookmark:_Toc113346277'><span style='mso-bookmark:_Toc113785414'><span
lang=EN-US style='mso-ansi-language:EN-US'>Backpropagation</span></span></span></span></span><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>Backpropagation is an algorithm for training a
neural network, that is, for adjusting the weights connecting units so that a
desired output is produced for a given input. It's a powerful algorithm, and we
have found that the conjugate gradient variant that is set to be the default
classifier for the toolbox learns quickly and generalizes well.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>In order to use the default classifier in the
toolbox, you will need a copy of the Matlab </span></span><a
href="http://www.mathworks.com/products/neuralnet/"><span style='mso-bookmark:
_Toc111992868'><span lang=EN-US style='mso-ansi-language:EN-US'>Neural Networks
toolbox</span></span><span style='mso-bookmark:_Toc111992868'></span></a><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>. If you don't have one, you can use </span></span><a
href="m2html/class_bp_netlab.html"><span style='mso-bookmark:_Toc111992868'><i><span
lang=EN-US style='mso-ansi-language:EN-US'>class_bp_netlab.m</span></i></span><span
style='mso-bookmark:_Toc111992868'></span></a><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'> (not yet ready) instead, which uses
the open source </span></span><a href="http://www.ncrg.aston.ac.uk/netlab/"><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>Netlab toolbox</span></span><span style='mso-bookmark:_Toc111992868'></span></a><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'> backpropagation function instead.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>See the Matlab Neural Networks toolbox </span></span><a
href="http://www.mathworks.com/access/helpdesk/help/toolbox/nnet/"><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>documentation</span></span><span style='mso-bookmark:_Toc111992868'></span></a><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'> for more information, such as how to examine the classifier weights or
the activations of the hidden layer.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>Note: the default algorithm for </span></span><a
href="m2html/train_bp.html"><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>train_bp.m</span></span><span
style='mso-bookmark:_Toc111992868'></span></a><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'> is conjugate gradient ('traincgb'),
mainly for historical reasons. However, the default for the Netlab net is
scaled conjugate gradient (which is similar to 'trainscg'). It's all much of a
muchness, though we're starting to think that 'trainscg' may be the way forward
&#8211; see the </span></span><a href="#_My_classifier_sometimes"><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>Howto's</span></span><span style='mso-bookmark:_Toc111992868'></span></a><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'> Classification section.<o:p></o:p></span></span></p>

<h3><span style='mso-bookmark:_Toc111992868'><a name="_Toc113346278"></a><a
name="_Toc113785415"><span style='mso-bookmark:_Toc113346278'><span lang=EN-US
style='mso-ansi-language:EN-US'>Included classifiers</span></span></a></span><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h3>

<p><span style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>Currently, </span></span><a href="#_Backpropagation"><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>backpropagation</span></span><span style='mso-bookmark:_Toc111992868'></span></a><span
style='mso-bookmark:_Toc111992868'><span style='mso-ansi-language:EN-US'> <span
lang=EN-US>is the only classifier algorithm included with the toolbox. We
intend to rapidly expand the list of included classifiers in future releases,
but in the meantime, it's extremely easy to </span></span></span><a
href="#_Creating_your_own_1"><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>add new classifiers yourself</span></span><span
style='mso-bookmark:_Toc111992868'></span></a><a name="_Toc112582944"><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>.<o:p></o:p></span></span></a></p>

<p><span style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></span></p>

<h3><span style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'><a
name="_Toc113346279"></a><a name="_Toc113785416"></a><a
name="_Creating_your_own_5"></a><span style='mso-bookmark:_Toc113346279'><span
style='mso-bookmark:_Toc113785416'><span lang=EN-US style='mso-ansi-language:
EN-US'>Creating your own training function</span></span></span></span></span><span
style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582944'><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>If you want to create your own classifier training function, start by
looking at the default </span></span></span><a href="m2html/train_bp.m"><span
style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>train_bp.m</span></span></span><span
style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'></span></span></a><span
style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>, and the </span></span></span><a
href="m2html/train_template.html"><span style='mso-bookmark:_Toc112582944'><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>train_template.m</span></span></span><span style='mso-bookmark:_Toc112582944'><span
style='mso-bookmark:_Toc111992868'></span></span></a><span style='mso-bookmark:
_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'> template.<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582944'><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>This training function will also need a corresponding </span></span></span><a
href="#_Creating_your_own_2"><span style='mso-bookmark:_Toc112582944'><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>testing function</span></span></span><span style='mso-bookmark:_Toc112582944'><span
style='mso-bookmark:_Toc111992868'></span></span></a><span style='mso-bookmark:
_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'> that actually tests generalization to unseen
data. It is worth noting that some classifiers don't need a training phase, in
which case the training function should simply return an empty scratchpad.<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582944'><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>Here are the requirements, based on <i>train_bp.m</i>:<o:p></o:p></span></span></span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal style='mso-list:l2 level1 lfo8;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span
     lang=EN-US style='mso-ansi-language:EN-US'>should take in <i>trainpats</i>
     (<i>nFeatures</i> x <i>nTrainingTimepoints</i>) training patterns<o:p></o:p></span></span></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo8;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span
     lang=EN-US style='mso-ansi-language:EN-US'>should take in <i>traintargs</i>
     (<i>nOutputUnits</i> x <i>nTrainingTimepoints</i>)<o:p></o:p></span></span></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo8;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span
     lang=EN-US style='mso-ansi-language:EN-US'>should take in a <i>train_args</i>
     structure containing fields specific to the classifier<o:p></o:p></span></span></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo8;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span
     lang=EN-US style='mso-ansi-language:EN-US'>should return a <i>scratchpad</i>
     structure that the corresponding </span></span></span><a
     href="#_Creating_your_own_2"><span style='mso-bookmark:_Toc112582944'><span
     style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
     EN-US'>testing function</span></span></span><span style='mso-bookmark:
     _Toc112582944'><span style='mso-bookmark:_Toc111992868'></span></span></a><span
     style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span
     lang=EN-US style='mso-ansi-language:EN-US'> knows how to use to test the
     classifier<o:p></o:p></span></span></span></li>
</ul>

<p><span style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>Since we couldn't think of a
sufficiently broad term to encompass all possible classifier algorithms, we
have adopted the term 'output units' to refer generically to the number of rows
in the teacher signal (i.e. supervised labels) being fed to the classifier.<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582944'><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></span></p>

<h3><span style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'><a
name="_Toc113346280"></a><a name="_Toc113785417"></a><a
name="_Creating_your_own_2"></a><span style='mso-bookmark:_Toc113346280'><span
style='mso-bookmark:_Toc113785417'><span lang=EN-US style='mso-ansi-language:
EN-US'>Creating your own testing function</span></span></span></span></span><span
style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582944'><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>If you want to create your own classifier testing function, start by
looking at the default </span></span></span><a href="m2html/test_bp.m"><span
style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>test_bp.m</span></span></span><span
style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'></span></span></a><span
style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>, and the </span></span></span><a
href="m2html/test_template.html"><span style='mso-bookmark:_Toc112582944'><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>test_template.m</span></span></span><span style='mso-bookmark:_Toc112582944'><span
style='mso-bookmark:_Toc111992868'></span></span></a><span style='mso-bookmark:
_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'> template.<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582944'><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>Most classifiers need to be trained by a </span></span></span><a
href="#_Creating_your_own_5"><span style='mso-bookmark:_Toc112582944'><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>training function</span></span></span><span style='mso-bookmark:_Toc112582944'><span
style='mso-bookmark:_Toc111992868'></span></span></a><span style='mso-bookmark:
_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'> before being tested. The training function
will create the scratchpad that contains whatever information is required at
testing.<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582944'><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>Here are the requirements, based on <i>test_bp.m</i>:<o:p></o:p></span></span></span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal style='mso-list:l2 level1 lfo8;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span
     lang=EN-US style='mso-ansi-language:EN-US'>should take in <i>testpats</i>
     (<i>nFeatures</i> x <i>nTestingTimepoints</i>)<o:p></o:p></span></span></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo8;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span
     lang=EN-US style='mso-ansi-language:EN-US'>should take in <i>testtargs</i>
     (<i>nOutputUnits</i> x <i>nTestingTimepoints</i>)<o:p></o:p></span></span></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo8;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span
     lang=EN-US style='mso-ansi-language:EN-US'>should take in a <i>scratchpad</i>
     which contains whatever fields are needed by the testing algorithm (e.g. a
     trained net) created by the corresponding </span></span></span><a
     href="#_Creating_your_own_5"><span style='mso-bookmark:_Toc112582944'><span
     style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
     EN-US'>training function</span></span></span><span style='mso-bookmark:
     _Toc112582944'><span style='mso-bookmark:_Toc111992868'></span></span></a><span
     style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span
     lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></span></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo8;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span
     lang=EN-US style='mso-ansi-language:EN-US'>should return an <i>acts</i>
     matrix (<i>nOutputUnits </i>x <i>nTestingTimepoints</i>), the same size as
     the <i>testtargs</i>, which contains the classifier's guesses in response
     to the <i>testpats</i>. These <i>acts</i> get compared to the <i>testtargs</i>.<o:p></o:p></span></span></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo8;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'><span
     lang=EN-US style='mso-ansi-language:EN-US'>should return the <i>scratchpad</i>,
     in case the test function added to it<o:p></o:p></span></span></span></li>
</ul>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582944'><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></span></p>

<h3><span style='mso-bookmark:_Toc112582944'><span style='mso-bookmark:_Toc111992868'><a
name="_Toc113346281"></a><a name="_Toc113785418"><span style='mso-bookmark:
_Toc113346281'><span lang=EN-US style='mso-ansi-language:EN-US'>The results
structure</span></span></a></span></span><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></span></h3>

<p class=MsoNormal style='tab-stops:160.5pt'><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>The <i>results</i> structure stores
everything you might need after a classification analysis.<o:p></o:p></span></span></p>

<p class=MsoNormal style='tab-stops:160.5pt'><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>It's divided up by iteration, one
for each iteration of the n-minus-one (or whatever cross-validation method
described by the selector group passed to <i>cross_validation.m</i>). The
following fields are contained in an <i>iteration</i> (not in this order):<o:p></o:p></span></span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal style='mso-list:l5 level1 lfo12;tab-stops:list 36.0pt left 160.5pt'><span
     style='mso-bookmark:_Toc111992868'><i><span lang=EN-US style='mso-ansi-language:
     EN-US'>scratchpad<o:p></o:p></span></i></span></li>
</ul>

<p class=MsoNormal style='margin-left:36.0pt;tab-stops:160.5pt'><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>This stores information about a particular classifier. For instance, the
network and weights get stored here when using the backpropagation classifier
(in the <i>net</i>) field.<o:p></o:p></span></span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal style='mso-list:l5 level1 lfo12;tab-stops:list 36.0pt left 160.5pt'><span
     style='mso-bookmark:_Toc111992868'><i><span lang=EN-US style='mso-ansi-language:
     EN-US'>acts<o:p></o:p></span></i></span></li>
</ul>

<p class=MsoNormal style='margin-left:36.0pt'><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>This is a matrix (<i>nOut</i> x <i>nTestTimepoints
in this iteration</i>) containing all of the outputs from the classifier for
each of the conditions at every test timepoint in this iteration<o:p></o:p></span></span></p>

<p class=MsoToc4 style='text-indent:-18.0pt;mso-list:l5 level1 lfo12;
tab-stops:list 36.0pt left 160.5pt'><span style='mso-bookmark:_Toc111992868'><![if !supportLists]><span
lang=EN-US style='font-family:Symbol;mso-ansi-language:EN-US;mso-bidi-font-style:
italic'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><i><span lang=EN-US style='mso-ansi-language:EN-US'>perfmet</span></i></span><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'> and <i>perf<o:p></o:p></i></span></span></p>

<p class=MsoToc4><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>This is a structure containing the calculations
required to calculate the </span></span><a href="#_Performance"><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>performance</span></span><span style='mso-bookmark:_Toc111992868'></span></a><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'> of the classifier. There are multiple ways in this can be calculated,
but all are required to contain a <i>perf</i> scalar. This <i>perf</i> scalar
is duplicated in <i>iterations(i).perf</i> for convenience.<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:36.0pt'><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>Multiple performance metrics can be
used to calculate a performance value. If multiple performance metrics are
applied to the same data, then the <i>perfmet</i> field is a cell array.<o:p></o:p></span></span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal style='mso-list:l5 level1 lfo12;tab-stops:list 36.0pt left 160.5pt'><span
     style='mso-bookmark:_Toc111992868'><i><span lang=EN-US style='mso-ansi-language:
     EN-US'>train_idx</span></i></span><span style='mso-bookmark:_Toc111992868'><span
     lang=EN-US style='mso-ansi-language:EN-US'>, <i>test_idx</i>, <i>rest_idx</i>,
     <i>unknown_idx<o:p></o:p></i></span></span></li>
</ul>

<p class=MsoToc4 style='tab-stops:160.5pt'><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>These index vectors are derived from
the cross-validation selector index that was used to decide which TRs would be
used for training/testing in <i>cross_validation.m</i>.<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:36.0pt'><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>TRs in the cross-validation selector
index marked with 1s are included in <i>train_idx</i>, 2s in <i>test_idx</i>,
0s become <i>rest_idx</i> and all other values go into the <i>unknown_idx</i>.
Only <i>train_idx</i> and <i>test_idx</i> play any role in classification at
all &#8211; <i>rest_idx</i> and <i>unknown_idx</i> are only stored for completeness.<o:p></o:p></span></span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal style='mso-list:l5 level1 lfo12;tab-stops:list 36.0pt left 160.5pt'><span
     style='mso-bookmark:_Toc111992868'><i><span lang=EN-US style='mso-ansi-language:
     EN-US'>created</span></i></span><span style='mso-bookmark:_Toc111992868'><span
     lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></span></li>
</ul>

<p class=MsoToc4 style='tab-stops:160.5pt'><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>As in the <i>subj</i> objects, this
stores the arguments and function name used to create this object.<o:p></o:p></span></span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal style='mso-list:l5 level1 lfo12;tab-stops:list 36.0pt left 160.5pt'><span
     style='mso-bookmark:_Toc111992868'><i><span lang=EN-US style='mso-ansi-language:
     EN-US'>header<o:p></o:p></span></i></span></li>
</ul>

<p class=MsoToc4 style='tab-stops:160.5pt'><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>More book-keeping information. You
can add to the free-text narrative <i style='mso-bidi-font-style:normal'>history</i><span
style='mso-bidi-font-style:italic'> field with </span></span></span><a
href="m2html/add_results_history.html"><span style='mso-bookmark:_Toc111992868'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-ansi-language:
EN-US'>add_results_history.m</span></i></span><span style='mso-bookmark:_Toc111992868'></span></a><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US;mso-bidi-font-style:italic'>.<o:p></o:p></span></span></p>

<p class=MsoNormal style='tab-stops:160.5pt'><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>There are no accessor functions
(like <i>get_object.m</i> or <i>set_mat.m</i>) for the results structure &#8211; just
edit it directly if you need to.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>Finally, it is worth noting that <i>results.total_perf</i>
stores the mean of all the <i>results.iterations(i).perfmet.perf</i> values. If
there are multiple perfmet objects, then <i>results.total_perf</i> will be a
vector.<o:p></o:p></span></span></p>

<h3><span style='mso-bookmark:_Toc111992868'><a name="_Toc112582945"></a><a
name="_Toc113346282"></a><a name="_Toc113785419"></a><a
name="_Troubleshooting_poor_classification"></a><span style='mso-bookmark:_Toc112582945'><span
style='mso-bookmark:_Toc113346282'><span style='mso-bookmark:_Toc113785419'><span
lang=EN-US style='mso-ansi-language:EN-US'>Troubleshooting poor classification
performance</span></span></span></span></span><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>Ticklist of things to try/check:<o:p></o:p></span></span></p>

<ol style='margin-top:0cm' start=1 type=1>
 <li class=MsoNormal style='mso-list:l4 level1 lfo19;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
     EN-US'>Are you sure there aren&#8217;t any problems with your data to begin
     with? Have you looked at the motion regressors from your fMRI analysis
     package?</span></span></li>
 <li class=MsoNormal style='mso-list:l4 level1 lfo19;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc111992868'>Think about your voxel selection
     methods. How many voxels are being allowed through? Try setting the
     p-value threshold to be more strict. Consider adding runs in as an extra
     factor to the ANOVA. Try feeding in an anatomical or functional mask
     defined a different way. Try the Mitchell et al. strategy of multiple
     t-tests against rest.</span></li>
 <li class=MsoNormal style='mso-list:l4 level1 lfo19;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
     EN-US'>Look at the timecourse of some of your voxels by eye. Do they look
     like there&#8217;s any systematic variance between conditions? If you can&#8217;t see
     it when you plot it, the classifier is going to have a hard time.</span></span></li>
 <li class=MsoNormal style='mso-list:l4 level1 lfo19;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
     EN-US'>Have you z-scored your data? De-trended it?<o:p></o:p></span></span></li>
 <li class=MsoNormal style='mso-list:l4 level1 lfo19;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
     EN-US'>Are you sure that your regressors are right? This is a very very
     common mistake.<o:p></o:p></span></span></li>
 <li class=MsoNormal style='mso-list:l4 level1 lfo19;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
     EN-US'>Try different classifier parameters, e.g. add a hidden layer if
     you&#8217;re using backprop.<o:p></o:p></span></span></li>
 <li class=MsoNormal style='mso-list:l4 level1 lfo19;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
     EN-US'>If you have a simpler classification that you can try as a check
     that things are working, try that.<o:p></o:p></span></span></li>
 <li class=MsoNormal style='mso-list:l4 level1 lfo19;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
     EN-US'>Check that you aren&#8217;t feeding rest in as part of the training data
     by accident.<o:p></o:p></span></span></li>
 <li class=MsoNormal style='mso-list:l4 level1 lfo19;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
     EN-US'>Try averaging a few TRs in a row together. This almost always
     helps. If it doesn&#8217;t, there simply may not be enough signal in the data.<o:p></o:p></span></span></li>
 <li class=MsoNormal style='mso-list:l4 level1 lfo19;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
     EN-US'>Create synthetic data and feed that through your entire analysis.
     If you can&#8217;t classify that, then perhaps your regressors are getting
     scrambled somehow relative to your data.<o:p></o:p></span></span></li>
 <li class=MsoNormal style='mso-list:l4 level1 lfo19;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
     EN-US'>Try a different subject, just in case.<o:p></o:p></span></span></li>
 <li class=MsoNormal style='mso-list:l4 level1 lfo19;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
     EN-US'>Try a different analysis, such as a standard GLM with a different
     package, to see whether sensible areas light up<o:p></o:p></span></span></li>
 <li class=MsoNormal style='mso-list:l4 level1 lfo19;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
     EN-US'>Look at the guesses the classifier is making. Is it consistently
     guessing one condition all the time? Perhaps there are uneven numbers of
     TRs in different conditions? If the size of your samples are radically
     different, that could throw off both the ANOVA and the classifier.<o:p></o:p></span></span></li>
 <li class=MsoNormal style='mso-list:l4 level1 lfo19;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
     EN-US'>Is your classifier training? Look at how its performance improves
     over time. Maybe your stopping criteria don&#8217;t make sense.<o:p></o:p></span></span></li>
 <li class=MsoNormal style='mso-list:l4 level1 lfo19;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
     EN-US'>Is it consistently doing poorly, or does it do above-chance on some
     iterations and not on others? Perhaps one run is aberrant in some way? Or
     perhaps it&#8217;s just a hard training problem, and it usually falls into local
     optima that don&#8217;t generalize well, in which case playing with its
     parameters might help.<o:p></o:p></span></span></li>
 <li class=MsoNormal style='mso-list:l4 level1 lfo19;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
     EN-US'>Could you be overfitting? Is your classifier <i>too</i> powerful
     for the number of observations (i.e. timepoints) that you&#8217;re feeding it?
     Try shrinking/removing the hidden layer. The </span></span><a
     href="http://www.mathworks.com/access/helpdesk/help/pdf_doc/nnet/nnet.pdf"><span
     style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
     EN-US'>Matlab Neural Networks manual</span></span><span style='mso-bookmark:
     _Toc111992868'></span></a><span style='mso-bookmark:_Toc111992868'><span
     lang=EN-US style='mso-ansi-language:EN-US'> has lots of hints for
     improving backpropagation generalization, and the same can probably be
     said for other algorithms too.<o:p></o:p></span></span></li>
</ol>

<h3><span style='mso-bookmark:_Toc111992868'><a name="_Toc112582946"></a><a
name="_Toc113346283"></a><a name="_Toc113785420"></a><a
name="_Avoiding_spurious_classification"></a><span style='mso-bookmark:_Toc112582946'><span
style='mso-bookmark:_Toc113346283'><span style='mso-bookmark:_Toc113785420'><span
lang=EN-US style='mso-ansi-language:EN-US'>Avoiding spurious classification</span></span></span></span></span><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>There are various ways in which one can fool
oneself into thinking that above-chance classification means something.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>For instance, if you&#8217;re peeking (feeding your
entire data set, including your test data, into your voxel selection method),
then it&#8217;s possible to classify complete nonsense better than chance (see </span></span><a
href="#_Peeking"><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>Peeking</span></span><span style='mso-bookmark:
_Toc111992868'></span></a><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>).<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>One essential check is to create a set of
scrambled regressors that have the same properties as your real regressors,
i.e. same number of TRs in each condition, balanced across runs etc. If the
classifier consistently trains and generalizes with above-chance performance on
testing data when you know that there is no regularity to the regressors, then
it&#8217;s back to the debugging drawing board. See </span></span><a
href="m2html/scrambled_regressors.html"><span style='mso-bookmark:_Toc111992868'><i><span
lang=EN-US style='mso-ansi-language:EN-US'>scrambled_regressors.m</span></i></span><span
style='mso-bookmark:_Toc111992868'></span></a><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'> for a way of easily shuffling the
order of your timepoints within a run.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>Note: there are various ways in which one could
scramble/shuffle the regressors matrix. The provided method is the simplest one
&#8211; but for specific experiments or situations, other methods that preserve some
of the properties of the data might be better.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></p>

<h3><span style='mso-bookmark:_Toc111992868'><a name="_Toc113346284"></a><a
name="_Toc113785421"><span style='mso-bookmark:_Toc113346284'>Further
information</span></a></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'>For further
information, see the </span><a href="#_Classification_1"><span
style='mso-bookmark:_Toc111992868'>Classification Howto's and
occasionally-asked questions</span><span style='mso-bookmark:_Toc111992868'></span></a><span
style='mso-bookmark:_Toc111992868'>.</span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></p>

<h2><span style='mso-bookmark:_Toc111992868'><a name="_Toc113346285"></a><a
name="_Toc113785422"></a><a name="_Toc112582947"></a><a name="_Exporting"></a><span
style='mso-bookmark:_Toc113346285'><span style='mso-bookmark:_Toc113785422'><span
style='mso-bookmark:_Toc112582947'><span lang=EN-US style='mso-ansi-language:
EN-US'>Exporting</span></span></span></span></span><span style='mso-bookmark:
_Toc111992868'><span style='mso-bookmark:_Toc112582947'><span lang=EN-US
style='mso-ansi-language:EN-US'><o:p></o:p></span></span></span></h2>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span
style='mso-bookmark:_Toc112582947'><span lang=EN-US style='mso-ansi-language:
EN-US'>See </span></span></span><a href="#_Importing"><span style='mso-bookmark:
_Toc111992868'><span style='mso-bookmark:_Toc112582947'><span lang=EN-US
style='mso-ansi-language:EN-US'>importing</span></span></span><span
style='mso-bookmark:_Toc111992868'><span style='mso-bookmark:_Toc112582947'></span></span></a><span
style='mso-bookmark:_Toc111992868'><span style='mso-bookmark:_Toc112582947'><span
lang=EN-US style='mso-ansi-language:EN-US'>.<o:p></o:p></span></span></span></p>

<h3><span style='mso-bookmark:_Toc111992868'><span style='mso-bookmark:_Toc112582947'><a
name="_Toc113346286"></a><a name="_Toc113785423"></a><a name="_To_AFNI"></a><span
style='mso-bookmark:_Toc113346286'><span style='mso-bookmark:_Toc113785423'><span
lang=EN-US style='mso-ansi-language:EN-US'>To AFNI</span></span></span></span></span><span
style='mso-bookmark:_Toc111992868'><span style='mso-bookmark:_Toc112582947'><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span
style='mso-bookmark:_Toc112582947'><span lang=EN-US style='mso-ansi-language:
EN-US'>See </span></span></span><a href="m2html/write_to_afni.html"><span
style='mso-bookmark:_Toc111992868'><span style='mso-bookmark:_Toc112582947'><i><span
lang=EN-US style='mso-ansi-language:EN-US'>write_to_afni.m</span></i></span></span><span
style='mso-bookmark:_Toc111992868'><span style='mso-bookmark:_Toc112582947'></span></span></a><span
style='mso-bookmark:_Toc111992868'><span style='mso-bookmark:_Toc112582947'><span
lang=EN-US style='mso-ansi-language:EN-US'>. This will write a pattern or a
mask to a BRIK file, using an existing sample BRIK (from the same data set) to
create the necessary header information. Uses </span></span></span><a
href="http://afni.nimh.nih.gov/sscc/ziad"><span style='mso-bookmark:_Toc111992868'><span
style='mso-bookmark:_Toc112582947'><span lang=EN-US style='mso-ansi-language:
EN-US'>Ziad Saad's</span></span></span><span style='mso-bookmark:_Toc111992868'><span
style='mso-bookmark:_Toc112582947'></span></span></a><span style='mso-bookmark:
_Toc111992868'><span style='mso-bookmark:_Toc112582947'><span style='mso-ansi-language:
EN-US'> </span></span></span><a href="http://afni.nimh.nih.gov/afni/matlab"><span
style='mso-bookmark:_Toc111992868'><span style='mso-bookmark:_Toc112582947'><span
lang=EN-US style='mso-ansi-language:EN-US'>AFNI-Matlab</span></span></span><span
style='mso-bookmark:_Toc111992868'><span style='mso-bookmark:_Toc112582947'></span></span></a><span
style='mso-bookmark:_Toc111992868'><span style='mso-bookmark:_Toc112582947'><span
lang=EN-US style='mso-ansi-language:EN-US'> library.<o:p></o:p></span></span></span></p>

<h3><span style='mso-bookmark:_Toc111992868'><span style='mso-bookmark:_Toc112582947'><a
name="_Toc113346287"></a><a name="_Toc113785424"><span style='mso-bookmark:
_Toc113346287'><span lang=EN-US style='mso-ansi-language:EN-US'>To BrainVoyager</span></span></a></span></span><span
style='mso-bookmark:_Toc111992868'><span style='mso-bookmark:_Toc112582947'><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span
style='mso-bookmark:_Toc112582947'><span lang=EN-US style='mso-ansi-language:
EN-US'>As </span></span></span><a href="#_From_BrainVoyager"><span
style='mso-bookmark:_Toc111992868'><span style='mso-bookmark:_Toc112582947'><span
lang=EN-US style='mso-ansi-language:EN-US'>above</span></span></span><span
style='mso-bookmark:_Toc111992868'><span style='mso-bookmark:_Toc112582947'></span></span></a><span
style='mso-bookmark:_Toc111992868'><span style='mso-bookmark:_Toc112582947'><span
lang=EN-US style='mso-ansi-language:EN-US'>.<o:p></o:p></span></span></span></p>

<h3><span style='mso-bookmark:_Toc111992868'><span style='mso-bookmark:_Toc112582947'><a
name="_Toc113346288"></a><a name="_Toc113785425"><span style='mso-bookmark:
_Toc113346288'><span lang=EN-US style='mso-ansi-language:EN-US'>To SPM</span></span></a></span></span><span
style='mso-bookmark:_Toc111992868'><span style='mso-bookmark:_Toc112582947'><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span
style='mso-bookmark:_Toc112582947'><span lang=EN-US style='mso-ansi-language:
EN-US'>As </span></span></span><a href="#_From_SPM"><span style='mso-bookmark:
_Toc111992868'><span style='mso-bookmark:_Toc112582947'><span lang=EN-US
style='mso-ansi-language:EN-US'>above</span></span></span><span
style='mso-bookmark:_Toc111992868'><span style='mso-bookmark:_Toc112582947'></span></span></a><span
style='mso-bookmark:_Toc111992868'><span style='mso-bookmark:_Toc112582947'><span
lang=EN-US style='mso-ansi-language:EN-US'>.<o:p></o:p></span></span></span></p>

<span style='mso-bookmark:_Toc112582947'></span>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></p>

<h2><span style='mso-bookmark:_Toc111992868'><a name="_Toc112582948"></a><a
name="_Toc113346289"></a><a name="_Toc113785426"><span style='mso-bookmark:
_Toc113346289'><span style='mso-bookmark:_Toc112582948'><span lang=EN-US
style='mso-ansi-language:EN-US'>Advanced</span></span></span></a></span><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h2>

<h3><span style='mso-bookmark:_Toc111992868'><a name="_Toc112582949"></a><a
name="_Toc113346290"></a><a name="_Toc113785427"></a><a name="_Toc111992867"></a><a
name="_Memory_efficiency"></a><span style='mso-bookmark:_Toc112582949'><span
style='mso-bookmark:_Toc113346290'><span style='mso-bookmark:_Toc113785427'><span
style='mso-bookmark:_Toc111992867'><span lang=EN-US style='mso-ansi-language:
EN-US'>Conventions</span></span></span></span></span></span><span
style='mso-bookmark:_Toc111992868'><span style='mso-bookmark:_Toc111992867'><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></span></span></h3>

<h3><span style='mso-bookmark:_Toc111992868'><span style='mso-bookmark:_Toc111992867'><a
name="_Toc112582950"></a><a name="_Toc113346291"></a><a name="_Toc113785428"><span
style='mso-bookmark:_Toc113346291'><span style='mso-bookmark:_Toc112582950'><span
lang=EN-US style='mso-ansi-language:EN-US'>Memory efficiency</span></span></span></a></span></span><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>The toolbox has a packrat mentality &#8211; it hoards
every version of the data that it processes. For instance, it keeps separate <i
style='mso-bidi-font-style:normal'>patterns</i> for before and after zscoring
with <i style='mso-bidi-font-style:normal'>zscore_runs.m</i>. This makes sense,
because it makes it easy to take a step back in the analysis path and re-run
things with slightly different parameters. However, it can eventually clog up
your RAM, especially with large patterns.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>For this reason, we recommend that when loading
in the data in the first place that any kind of masking be applied as early as
possible, e.g. to exclude voxels from outside the cranium.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>If you do wish to discard a <i
style='mso-bidi-font-style:normal'>pattern </i>(e.g. from an earlier or
discarded step of the analysis), then the simplest solution is to </span></span><a
href="#_Removing_objects"><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>remove it</span></span><span
style='mso-bookmark:_Toc111992868'></span></a><span style='mso-bookmark:_Toc111992868'>,</span><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'> or better still, just </span></span><a href="#_Moving_patterns_to"><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>tell the toolbox to store it as a file on the hard disk</span></span><span
style='mso-bookmark:_Toc111992868'></span></a><span style='mso-bookmark:_Toc111992868'><span
lang=EN-US style='mso-ansi-language:EN-US'>.<o:p></o:p></span></span></p>

<h4><span style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>Amount of required RAM<o:p></o:p></span></span></h4>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>In order to do anything with a Matlab matrix,
you really need enough RAM to store it twice. Removing or adding a column to
it, or modifying it within a function, require a duplication of that matrix. We
have endeavoured to ensure that the toolbox never requires you to have more RAM
than needed to hold a single duplicate of your data. Some of the toolbox&#8217;s
internal accessor functions (such as the <i style='mso-bidi-font-style:normal'>set/get_object</i>
functions, and the <i style='mso-bidi-font-style:normal'>init_new_object</i>
functions) may look incredibly inefficient, since it seems as though they are
making multiple copies of entire objects or even entire cell arrays of objects
and passing them up and down functions. The advantage of this coding style is
that all of the accessor logic for the 4 data types is in one place.
Fortunately, even though Matlab passes by value and doesn&#8217;t explicitly allow the
use of pointers, it appears to implicitly use pointers in a clever way to
ensure that it only actually makes a copy of an argument when passing it into a
function if the contents of that argument get modified. <o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>Having experimented with different ways of
storing and passing objects between functions, we don't think the toolbox could
manage its variables much more efficiently, short of shunning functions
entirely. If you have any better ideas, or believe this explanation to be in
error, we would be very interested to </span></span><a href="#_Contact_details"><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>hear from you</span></span><span style='mso-bookmark:_Toc111992868'></span></a><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>.<o:p></o:p></span></span></p>

<h3><span style='mso-bookmark:_Toc111992868'><a name="_Toc112582951"></a><a
name="_Toc113346292"></a><a name="_Toc113785429"></a><a
name="_Moving_patterns_to"></a><span style='mso-bookmark:_Toc112582951'><span
style='mso-bookmark:_Toc113346292'><span style='mso-bookmark:_Toc113785429'><span
lang=EN-US style='mso-ansi-language:EN-US'>Moving patterns to the hard disk</span></span></span></span></span><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>The </span></span><a
href="m2html/move_pattern_to_hd.html"><span style='mso-bookmark:_Toc111992868'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-ansi-language:
EN-US'>move_pattern_to_hd.m</span></i></span><span style='mso-bookmark:_Toc111992868'></span></a><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'> and its companion, </span></span><a
href="m2html/load_pattern_from_hd.html"><span style='mso-bookmark:_Toc111992868'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-ansi-language:
EN-US'>load_pattern_from_hd.m</span></i></span><span style='mso-bookmark:_Toc111992868'></span></a><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'> are designed to free up RAM without throwing away information. They
allow you to move the matrix contents of a particular object out to a file,
while allowing you to access that data using the standard <i style='mso-bidi-font-style:
normal'>get/set_object</i> scripts entirely transparently. This is one of the
side-advantages of using the accessor scripts as a layer of abstraction between
the toolbox&#8217;s data structures and you, the user.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>If you're having trouble with memory, we
recommend that you choose a couple of large pattern objects that you're not
using and use <i>move_pattern_to_hd.m</i> on them to free up RAM. Of course,
access times for data stored on the hard disk are much, much slower than for
data stored in RAM. For this reason, the data can be moved back into RAM
(removing any traces from the hard disk) with <i style='mso-bidi-font-style:
normal'>load_pattern_from_hd.m</i>.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>In the future, we hope to take advantage of
Matlab's memory-mapping functionality or investigate other file formats that
will allow more efficient random-access than the .mat format, which requires
the entire matrix to be loaded in before it can be accessed. Any advice or
support </span></span><a href="#_Contact_details"><span style='mso-bookmark:
_Toc111992868'><span lang=EN-US style='mso-ansi-language:EN-US'>would be
appreciated</span></span><span style='mso-bookmark:_Toc111992868'></span></a><span
style='mso-bookmark:_Toc111992868'><span lang=EN-US style='mso-ansi-language:
EN-US'>.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'><span lang=EN-US
style='mso-ansi-language:EN-US'>It is worth noting that this functionality only
exists for <i style='mso-bidi-font-style:normal'>patterns</i>, since they take
up so much more space than any of the other data types.<o:p></o:p></span></span></p>

<h3><span style='mso-bookmark:_Toc111992868'><a name="_Toc112582952"></a><a
name="_Toc113346293"></a><a name="_Toc113785430"></a><a name="_Removing_objects"></a><span
style='mso-bookmark:_Toc112582952'><span style='mso-bookmark:_Toc113346293'><span
style='mso-bookmark:_Toc113785430'>Removing objects</span></span></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'>There are two ways
in which you can remove objects:</span></p>

<ol style='margin-top:0cm' start=1 type=1>
 <li class=MsoNormal style='mso-list:l0 level1 lfo22;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc111992868'><i style='mso-bidi-font-style:normal'>Remove_object.m</i>
     will set the object&#8217;s <i style='mso-bidi-font-style:normal'>mat</i> to
     empty. Since this is where each object&#8217;s main matrix is stored, this is
     probably taking up most of the room occupied by the object. This is
     usually sufficient, and has the advantage that it leaves the surrounding <i
     style='mso-bidi-font-style:normal'>name</i> and <i style='mso-bidi-font-style:
     normal'>header </i>information intact, in case other objects want to
     reference it, and doesn&#8217;t renumber the cells.</span></li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo22;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc111992868'>If you really want to, you can remove
     the entire cell for the object, by passing in &#8216;erase&#8217; as the optional
     argument to <i style='mso-bidi-font-style:normal'>remove_object.m</i>.</span></li>
</ol>

<p class=MsoNormal><span style='mso-bookmark:_Toc111992868'>Since <i
style='mso-bidi-font-style:normal'>patterns</i> tend to be the biggest memory
hogs, you can also just transparently </span><a href="#_Moving_patterns_to"><span
style='mso-bookmark:_Toc111992868'>shift the <i style='mso-bidi-font-style:
normal'>pattern</i> to the hard disk</span><span style='mso-bookmark:_Toc111992868'></span></a><span
style='mso-bookmark:_Toc111992868'>, which frees up your RAM without thowing
away data that might be useful later on.</span></p>

<h3><span style='mso-bookmark:_Toc111992868'><a name="_Toc112582953"></a><a
name="_Toc113346294"></a><a name="_Toc113785431"></a><a
name="_Accessing_the_subj"></a><span style='mso-bookmark:_Toc112582953'><span
style='mso-bookmark:_Toc113346294'><span style='mso-bookmark:_Toc113785431'><span
lang=EN-US style='mso-ansi-language:EN-US'>Accessing the subj structure
directly</span></span></span></span></span><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></h3>

<p><span lang=EN-US style='mso-ansi-language:EN-US'>We realise that using the
accessor functions is slightly more cumbersome than accessing the contents of
the <i style='mso-bidi-font-style:normal'>subj</i> structure directly. However,
bypassing them can cause many subtle problems and is not recommended.<o:p></o:p></span></p>

<p><span lang=EN-US style='mso-ansi-language:EN-US'>Having said that, nothing
can go wrong if you're just using the standard syntax to view an object, e.g.<o:p></o:p></span></p>

<div style='border:solid windowtext .25pt;padding:6.0pt 3.0pt 6.0pt 3.0pt'>

<p class=Code><span lang=EN-US style='mso-ansi-language:EN-US'>&gt;&gt;
subj.regressors{5}<o:p></o:p></span></p>

</div>

<p style='tab-stops:54.5pt'><span lang=EN-US style='mso-ansi-language:EN-US'>It's
really only when you change the values in an object that there's a real risk of
things getting badly confused amidst the assumptions and interactions between
functions. Hopefully, these should all be preserved intact by the provided
accessor functions.<o:p></o:p></span></p>

<p><span lang=EN-US style='mso-ansi-language:EN-US'>We will provide one example
of how the accessor scripts can help. If you remove voxels from a <i
style='mso-bidi-font-style:normal'>pattern </i>by just deleting them from the
matrix, this could disrupt all the fragile indexing that is used to determine
which voxel is which. In order to avoid this, <i style='mso-bidi-font-style:
normal'>set_pattern.m</i> makes it very difficult to change the dimensions of
the <i style='mso-bidi-font-style:normal'>pattern</i> matrix, unless you are
using the <a href="#_Figuring_out_which">authorised masking functionality that
preserves the indexing</a>. Such bugs can be particularly insidious because
they may or may not cause errors. In the worst case, your analysis could run
without incident, but actually scramble your voxels.<o:p></o:p></span></p>

<p><span lang=EN-US style='mso-ansi-language:EN-US'>These <a
href="#_Handy_shortcuts">handy shortcuts</a> may make your life a little
easier.<o:p></o:p></span></p>

<p style='tab-stops:54.5pt'><span lang=EN-US style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<h3><a name="_Toc112582954"></a><a name="_Toc113346295"></a><a
name="_Toc113785432"></a><a name="_Figuring_out_which"></a><span
style='mso-bookmark:_Toc112582954'><span style='mso-bookmark:_Toc113346295'><span
style='mso-bookmark:_Toc113785432'><span lang=EN-US style='mso-ansi-language:
EN-US'>Figuring out which voxel is which, and where</span></span></span></span><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></h3>

<p><i><span lang=EN-US style='mso-ansi-language:EN-US'>Or &quot;Dude, Where's
My Voxel?&quot; &#8211; A Guide to Relative Indices in MVPA by Chris Moore<o:p></o:p></span></i></p>

<p><span lang=EN-US style='mso-ansi-language:EN-US'>See also: <a href="#_Masks">Howto's
/ Data structures / Masks</a>.<o:p></o:p></span></p>

<p><span lang=EN-US style='mso-ansi-language:EN-US'>In a perfect world,
patterns stored in MVPA subject structures would be stored in their native space,
in full dimensionality. But due to memory contraints and convenience, it is
typically prudent to input and store a subset of the data, such as the voxels
specified by a whole-brain mask. For this reason, loaded 3D patterns are stored
in the <i>subj</i> structure as two dimensional matrices.<o:p></o:p></span></p>

<p><span lang=EN-US style='mso-ansi-language:EN-US'>It is important to note
that the 3D information (xyz coordinates of voxels in a pattern) is <i>not</i>
stored in the pattern once it is loaded.<span style="mso-spacerun: yes">&nbsp;
</span>Rather, all patterns are associated with the mask that was used in their
creation. For instance, when calling <i><a href="m2html/load_afni_pattern.m">load_afni_pattern.m</a></i>,
a required argument is the name of a map in the <i>subj</i> structure used to
mask the BRIK. The resulting pattern contains a field, <i>masked_by</i>, which
points to the mask that contains the 3D information.<o:p></o:p></span></p>

<p><span lang=EN-US style='mso-ansi-language:EN-US'>The mask should be a
boolean mask with the same dimensions as the data in its native space. The
order of data in the pattern corresponds to the order of the voxels, such that
one could recreate the dataset in its native space with the code:<o:p></o:p></span></p>

<div style='border:solid windowtext .25pt;padding:6.0pt 3.0pt 6.0pt 3.0pt'>

<p class=Code><span lang=EN-US style='mso-ansi-language:EN-US'>&gt;&gt; data =
get_mat(subj,'pattern','dataset');<o:p></o:p></span></p>

<p class=Code><span lang=EN-US style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code><span lang=EN-US style='mso-ansi-language:EN-US'>&gt;&gt;
masked_by = get_objfield(subj,'dataset','masked_by');<o:p></o:p></span></p>

<p class=Code><span lang=EN-US style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code><span lang=EN-US style='mso-ansi-language:EN-US'>&gt;&gt; mask =
get_mat(subj,'mask',masked_by);<o:p></o:p></span></p>

<p class=Code><span lang=EN-US style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code><span lang=EN-US style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code><span lang=EN-US style='mso-ansi-language:EN-US'>&gt;&gt;
full_data = zeros(size(data));<o:p></o:p></span></p>

<p class=Code><span lang=EN-US style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code><span lang=EN-US style='mso-ansi-language:EN-US'>&gt;&gt;
full_data(find(mask)) = data;<o:p></o:p></span></p>

</div>

<p><span lang=EN-US style='mso-ansi-language:EN-US'>Note that this <i>only</i>
works for datasets and masks when the mask was used to create the dataset, thus
ensuring proper relative indices, and the mask has not been altered in any way.
In general, it is a good practice to never modify masks. If you wish to modify
a mask, consider creating a duplicate, and modifying the duplicate. If you do
modify a mask that was used to create a dataset, you will break the relative
indices, and will not be able to recover the XYZ coordinates of each voxel in
that pattern. In the worst case, you may not realise that this is the case, and
be erroneously indexing your voxels.<o:p></o:p></span></p>

<p><span lang=EN-US style='mso-ansi-language:EN-US'>Relative indices such as
those above (e.g., </span><span style='font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>find(mask)</span><span
lang=EN-US style='mso-ansi-language:EN-US'>) only work under specific
conditions, and can cause problems if not used properly. For instance, if we
have a wholebrain data set, and mask it with an anatomical mask, we can create
a 2nd pattern. If we then take this pattern and apply a functional mask, we
create a 3rd pattern. The relative indices from the 3rd pattern to the 1st and
2nd are different. To avoid this confusion, they are never stored within the <i>subj</i>
structure. Relative indices should always be created on the fly between two
objects, and never stored.<o:p></o:p></span></p>

<p><span lang=EN-US style='mso-ansi-language:EN-US'>Relative indices between
any two objects can be calculated by finding the intersection of two masks.
Thus, when finding the relative indices for a pattern and a mask, the pattern
must have a <i>masked_by</i> mask intact. The code for calculating relative
indices is as follows:<o:p></o:p></span></p>

<div style='border:solid windowtext .25pt;padding:6.0pt 3.0pt 6.0pt 3.0pt'>

<p class=Code><span lang=EN-US style='mso-ansi-language:EN-US'>&gt;&gt; data =
get_mat(subj,'pattern','dataset');<o:p></o:p></span></p>

<p class=Code><span lang=EN-US style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code><span lang=EN-US style='mso-ansi-language:EN-US'>&gt;&gt;
masked_by = get_objfield(subj,'pattern','dataset','masked_by');<o:p></o:p></span></p>

<p class=Code><span lang=EN-US style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code><span lang=EN-US style='mso-ansi-language:EN-US'>&gt;&gt; mask =
get_mat(subj,'mask','masked_by');<o:p></o:p></span></p>

<p class=Code><span lang=EN-US style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code><span lang=EN-US style='mso-ansi-language:EN-US'>&gt;&gt;
new_mask = get_mat(subj,'mask','anat_mask');<o:p></o:p></span></p>

<p class=Code><span lang=EN-US style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code><span lang=EN-US style='mso-ansi-language:EN-US'>&gt;&gt; [int ia
ib] = intersect(find(mask), find(new_mask));<o:p></o:p></span></p>

</div>

<p><span lang=EN-US style='mso-ansi-language:EN-US'>In this example, IA is the
index of MASK in NEW_MASK. IB is the inverse, the index of NEW_MASK in MASK.
Thus, one could take the relative index, IB, and extract the voxels in DATA
that are present in the mask NEW_MASK:<o:p></o:p></span></p>

<div style='border:solid windowtext .25pt;padding:6.0pt 3.0pt 6.0pt 3.0pt'>

<p class=Code><span lang=EN-US style='mso-ansi-language:EN-US'>&gt;&gt;
new_data = data(IB,:);<o:p></o:p></span></p>

</div>

<p><span lang=EN-US style='mso-ansi-language:EN-US'>This is precisely what
create_thresh_mask() does. We have included this guide to help users understand
how relative indices were meant to work, and to facilitate integrating new
functions, but urge the user to use the standard MVPA functions whenever
possible. Happy coding.<o:p></o:p></span></p>

<p><span lang=EN-US style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<h3><a name="_Toc113346296"></a><a name="_Toc113785433"></a><a
name="_Toc112582955"></a><a name="_Handy_shortcuts"></a><span style='mso-bookmark:
_Toc113346296'><span style='mso-bookmark:_Toc113785433'><span style='mso-bookmark:
_Toc112582955'><span lang=EN-US style='mso-ansi-language:EN-US'>Handy shortcuts</span></span></span></span><span
style='mso-bookmark:_Toc112582955'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582955'><span lang=EN-US
style='mso-ansi-language:EN-US'>We've tried to add some minor labour-saving devices
to make using the toolbox easier.<o:p></o:p></span></span></p>

<h4><span style='mso-bookmark:_Toc112582955'><a name="_Getting_the_latest"></a><span
lang=EN-US style='mso-ansi-language:EN-US'>Getting the latest object names<o:p></o:p></span></span></h4>

<p><span style='mso-bookmark:_Toc112582955'><span lang=EN-US style='mso-ansi-language:
EN-US'>Much of the time, you'll want to look at or use the most
recently-created pattern, or run or regressors or mask. Sometimes, it can be a
pain to remember or type long object names, and sometimes when writing
functions, you may not know in advance what the latest names will be.<o:p></o:p></span></span></p>

<p><span style='mso-bookmark:_Toc112582955'><span lang=EN-US style='mso-ansi-language:
EN-US'>To make this easier, the toolbox keeps track of the latest object of
each type that was initialized as subj.p, .r, .s and .m. This way, you could
type:<o:p></o:p></span></span></p>

<div style='border:solid windowtext .25pt;padding:6.0pt 3.0pt 6.0pt 3.0pt'>

<p class=Code><span style='mso-bookmark:_Toc112582955'><span lang=EN-US
style='mso-ansi-language:EN-US'>&gt;&gt; get_object(subj,'pattern',subj.p)<o:p></o:p></span></span></p>

</div>

<p><span style='mso-bookmark:_Toc112582955'><span lang=EN-US style='mso-ansi-language:
EN-US'>as a bit of a shorthand. <o:p></o:p></span></span></p>

<p><span style='mso-bookmark:_Toc112582955'><span lang=EN-US style='mso-ansi-language:
EN-US'>Note: this is one of those handy labour-saving devices that might prove
a terrible idea if used carelessly. For instance, be careful after creating a
group, since it's unlikely that you'll want to specifically access the last
item in that group.<o:p></o:p></span></span></p>

<p><span style='mso-bookmark:_Toc112582955'><span lang=EN-US style='mso-ansi-language:
EN-US'>Note: We deliberately decided not to have the remove functions alter the
subj.x shortcuts when removing the highest-numbered mat or object of its type.
This way, if you forget to update them yourself, you'll get an error. If we
were to automatically set them to the next highest-numbered item, you might not
notice and end up with a subtil and devilish bug.<o:p></o:p></span></span></p>

<p><span style='mso-bookmark:_Toc112582955'><span lang=EN-US style='mso-ansi-language:
EN-US'>If you have ideas for other ways to speed up frequently-performed tasks
or minimise how much typing users have to do, we'd be happy to </span></span><a
href="#_Contact_details"><span style='mso-bookmark:_Toc112582955'><span
lang=EN-US style='mso-ansi-language:EN-US'>hear from you</span></span><span
style='mso-bookmark:_Toc112582955'></span></a><span style='mso-bookmark:_Toc112582955'><span
lang=EN-US style='mso-ansi-language:EN-US'>.<o:p></o:p></span></span></p>

<h4><span style='mso-bookmark:_Toc112582955'><span lang=EN-US style='mso-ansi-language:
EN-US'>Getting the mat immediately from a duplicated object<o:p></o:p></span></span></h4>

<p><span style='mso-bookmark:_Toc112582955'><span lang=EN-US style='mso-ansi-language:
EN-US'>Often, you'll find yourself doing the following:<o:p></o:p></span></span></p>

<p style='margin-left:53.85pt;text-indent:-18.0pt;mso-list:l8 level1 lfo24;
tab-stops:list 53.85pt'><span style='mso-bookmark:_Toc112582955'><![if !supportLists]><span
lang=EN-US style='mso-ansi-language:EN-US'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span lang=EN-US style='mso-ansi-language:EN-US'>duplicating
an object<o:p></o:p></span></span></p>

<p style='margin-left:53.85pt;text-indent:-18.0pt;mso-list:l8 level1 lfo24;
tab-stops:list 53.85pt'><span style='mso-bookmark:_Toc112582955'><![if !supportLists]><span
lang=EN-US style='mso-ansi-language:EN-US'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span lang=EN-US style='mso-ansi-language:EN-US'>getting
the <i>mat</i> from the new object<o:p></o:p></span></span></p>

<p style='margin-left:53.85pt;text-indent:-18.0pt;mso-list:l8 level1 lfo24;
tab-stops:list 53.85pt'><span style='mso-bookmark:_Toc112582955'><![if !supportLists]><span
lang=EN-US style='mso-ansi-language:EN-US'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span lang=EN-US style='mso-ansi-language:EN-US'>modifying
it<o:p></o:p></span></span></p>

<p style='margin-left:53.85pt;text-indent:-18.0pt;mso-list:l8 level1 lfo24;
tab-stops:list 53.85pt'><span style='mso-bookmark:_Toc112582955'><![if !supportLists]><span
lang=EN-US style='mso-ansi-language:EN-US'>4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span lang=EN-US style='mso-ansi-language:EN-US'>setting
it back into the object.<o:p></o:p></span></span></p>

<p><span style='mso-bookmark:_Toc112582955'><span lang=EN-US style='mso-ansi-language:
EN-US'>To reduce this down by one step, it's worth noting that the </span></span><a
href="m2html/duplicate_object.html"><span style='mso-bookmark:_Toc112582955'><i><span
lang=EN-US style='mso-ansi-language:EN-US'>duplicate_object.m</span></i></span><span
style='mso-bookmark:_Toc112582955'></span></a><span style='mso-bookmark:_Toc112582955'><span
lang=EN-US style='mso-ansi-language:EN-US'> function will return the duplicated
object's <i>mat</i> as its second argument, allowing you to combine the first
two steps in one line:<o:p></o:p></span></span></p>

<div style='border:solid windowtext .25pt;padding:6.0pt 3.0pt 6.0pt 3.0pt'>

<p class=Code><span style='mso-bookmark:_Toc112582955'><span lang=EN-US
style='mso-ansi-language:EN-US'>&gt;&gt; [subj duplicated_mat] =
duplicate_obj(subj,objtype,old_objname,new_objname);<o:p></o:p></span></span></p>

</div>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582955'><span lang=EN-US
style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></p>

<h3><span style='mso-bookmark:_Toc112582955'><a name="_Toc113346297"></a><a
name="_Toc113785434"><span style='mso-bookmark:_Toc113346297'><span lang=EN-US
style='mso-ansi-language:EN-US'>Creating custom functions</span></span></a></span><span
style='mso-bookmark:_Toc112582955'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582955'><span lang=EN-US
style='mso-ansi-language:EN-US'>It is very easy to override the toolbox's
default functions with your own custom-created function that the main toolbox
control functions can call when appropriate. For instance, if you don't want to
use the default backpropagation classifier, or the default ANOVA statmap
generator, you can drop your own functions in instead, and the toolbox's
no-peeking cross-validation control functions will use your custom functions
instead at the appropriate times.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582955'><span lang=EN-US
style='mso-ansi-language:EN-US'>At the moment, there are various places where
you can substitute your own functions &#8211; click on the links in the </span></span><a
href="#_Places_that_can"><span style='mso-bookmark:_Toc112582955'><span
lang=EN-US style='mso-ansi-language:EN-US'>list</span></span><span
style='mso-bookmark:_Toc112582955'></span></a><span style='mso-bookmark:_Toc112582955'><span
lang=EN-US style='mso-ansi-language:EN-US'> below to skip to the section where
the specific details for each are described.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582955'><span lang=EN-US
style='mso-ansi-language:EN-US'>If you do create a custom function and you
think others might benefit from it, we'd really like to </span></span><a
href="#_Contact_details"><span style='mso-bookmark:_Toc112582955'><span
lang=EN-US style='mso-ansi-language:EN-US'>hear from you</span></span><span
style='mso-bookmark:_Toc112582955'></span></a><span style='mso-bookmark:_Toc112582955'><span
lang=EN-US style='mso-ansi-language:EN-US'> so that we can incorporate it into future
releases of the toolbox.<o:p></o:p></span></span></p>

<h4><span style='mso-bookmark:_Toc112582955'><a name="_Common_custom_function"></a><a
name="_Requirements_for_custom"></a><span lang=EN-US style='mso-ansi-language:
EN-US'>Places that can call custom function<o:p></o:p></span></span></h4>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal style='mso-list:l5 level1 lfo12;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc112582955'></span><a href="#_Creating_your_own"><span
     style='mso-bookmark:_Toc112582955'><span lang=EN-US style='mso-ansi-language:
     EN-US'>statmap generation</span></span><span style='mso-bookmark:_Toc112582955'></span></a><span
     style='mso-bookmark:_Toc112582955'><span lang=EN-US style='mso-ansi-language:
     EN-US'> &#8211; <i>feature_selection.m</i> and <i><span style='color:red'>peek_feature_selection.m</span></i><span
     style='color:red'> </span>can take optional <i>statmap_funct</i> and <i>statmap_arg</i>
     arguments<o:p></o:p></span></span></li>
 <li class=MsoNormal style='mso-list:l5 level1 lfo12;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc112582955'></span><a href="#_Creating_your_own_1"><span
     style='mso-bookmark:_Toc112582955'><span lang=EN-US style='mso-ansi-language:
     EN-US'>classifier training</span></span><span style='mso-bookmark:_Toc112582955'></span></a><span
     style='mso-bookmark:_Toc112582955'><span style='color:red;mso-ansi-language:
     EN-US'> </span></span><span style='mso-bookmark:_Toc112582955'><span
     lang=EN-US style='mso-ansi-language:EN-US'>&#8211; <i>cross_validation.m</i> can
     take an optional <i>train_funct</i> function name string<o:p></o:p></span></span></li>
 <li class=MsoNormal style='mso-list:l5 level1 lfo12;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc112582955'></span><a href="#_Creating_your_own_2"><span
     style='mso-bookmark:_Toc112582955'><span lang=EN-US style='mso-ansi-language:
     EN-US'>classifier test</span></span><span style='mso-bookmark:_Toc112582955'></span></a><span
     style='mso-bookmark:_Toc112582955'><span style='color:red;mso-ansi-language:
     EN-US'> </span></span><span style='mso-bookmark:_Toc112582955'><span
     lang=EN-US style='mso-ansi-language:EN-US'>&#8211; <i>cross_validation.m</i> can
     take an optional <i>test_funct</i> function name string<o:p></o:p></span></span></li>
 <li class=MsoNormal style='mso-list:l5 level1 lfo12;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc112582955'></span><a href="#_Creating_your_own_3"><span
     style='mso-bookmark:_Toc112582955'><span lang=EN-US style='mso-ansi-language:
     EN-US'>classifier performance metrics</span></span><span style='mso-bookmark:
     _Toc112582955'></span></a><span style='mso-bookmark:_Toc112582955'><span
     style='color:red;mso-ansi-language:EN-US'> </span></span><span
     style='mso-bookmark:_Toc112582955'><span lang=EN-US style='mso-ansi-language:
     EN-US'>&#8211; <i>cross_validation.m</i> can take an optional <i>perfmet_functs</i>
     cell array of performance metric function name strings<o:p></o:p></span></span></li>
</ul>

<h4><span style='mso-bookmark:_Toc112582955'><span lang=EN-US style='mso-ansi-language:
EN-US'>Requirements for custom functions that modify the <i>subj</i> structure<o:p></o:p></span></span></h4>

<p><span style='mso-bookmark:_Toc112582955'><span lang=EN-US style='mso-ansi-language:
EN-US'>Any custom functions that modify the <i>subj</i> structure (usually by
creating a new object) should fulfil the following requirements, if they're
going to be well-behaved toolbox citizens:<o:p></o:p></span></span></p>

<p style='margin-left:36.0pt;text-indent:-18.0pt;mso-list:l5 level1 lfo12;
tab-stops:list 36.0pt'><span style='mso-bookmark:_Toc112582955'><![if !supportLists]><span
lang=EN-US style='font-family:Symbol;mso-ansi-language:EN-US'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span lang=EN-US style='mso-ansi-language:EN-US'>take
in a <i>subj</i> structure as their first argument<o:p></o:p></span></span></p>

<p style='margin-left:36.0pt;text-indent:-18.0pt;mso-list:l5 level1 lfo12;
tab-stops:list 36.0pt'><span style='mso-bookmark:_Toc112582955'><![if !supportLists]><span
lang=EN-US style='font-family:Symbol;mso-ansi-language:EN-US'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span lang=EN-US style='mso-ansi-language:EN-US'>return
the modified <i>subj</i> structure as their first output argument<o:p></o:p></span></span></p>

<p style='margin-left:36.0pt;text-indent:-18.0pt;mso-list:l5 level1 lfo12;
tab-stops:list 36.0pt'><span style='mso-bookmark:_Toc112582955'><![if !supportLists]><span
lang=EN-US style='font-family:Symbol;mso-ansi-language:EN-US'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span lang=EN-US style='mso-ansi-language:EN-US'>if the
custom function creates a new <i>subj</i> structure object, you should add a
line to the help comments that says 'Adds the following objects:' and a list of
the objects/groups that get created<o:p></o:p></span></span></p>

<p style='margin-left:36.0pt;text-indent:-18.0pt;mso-list:l5 level1 lfo12;
tab-stops:list 36.0pt'><span style='mso-bookmark:_Toc112582955'><![if !supportLists]><span
lang=EN-US style='font-family:Symbol;mso-ansi-language:EN-US'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span lang=EN-US style='mso-ansi-language:EN-US'>if the
custom function creates a new <i>subj</i> structure object, you should display
something like:<o:p></o:p></span></span></p>

<div style='border:solid windowtext .25pt;padding:6.0pt 3.0pt 6.0pt 3.0pt'>

<p class=Code style='margin-left:72.0pt'><span style='mso-bookmark:_Toc112582955'><span
lang=EN-US style='mso-ansi-language:EN-US'>sprintf('Created %s called
%s',objtype,objname)<o:p></o:p></span></span></p>

</div>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal style='mso-list:l3 level1 lfo28;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc112582955'><span lang=EN-US style='mso-ansi-language:
     EN-US'>should call the </span></span><a href="m2html/add_created.m"><span
     style='mso-bookmark:_Toc112582955'><i><span lang=EN-US style='mso-ansi-language:
     EN-US'>add_created.m</span></i></span><span style='mso-bookmark:_Toc112582955'></span></a><span
     style='mso-bookmark:_Toc112582955'><i><span style='mso-ansi-language:EN-US'>
     </span></i></span><span style='mso-bookmark:_Toc112582955'><span
     lang=EN-US style='mso-ansi-language:EN-US'>with fields for the name of the
     function and any arguments it takes<o:p></o:p></span></span></li>
 <li class=MsoNormal style='mso-list:l3 level1 lfo28;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc112582955'><span lang=EN-US style='mso-ansi-language:
     EN-US'>should call </span></span><a href="m2html/add_history.m"><span
     style='mso-bookmark:_Toc112582955'><i><span lang=EN-US style='mso-ansi-language:
     EN-US'>add_history.m</span></i></span><span style='mso-bookmark:_Toc112582955'></span></a><span
     style='mso-bookmark:_Toc112582955'><i><span style='mso-ansi-language:EN-US'>
     </span></i></span><span style='mso-bookmark:_Toc112582955'><span
     lang=EN-US style='mso-ansi-language:EN-US'>to add a line describing
     themselves to their own freetext history narrative<o:p></o:p></span></span></li>
 <li class=MsoNormal style='mso-list:l3 level1 lfo28;tab-stops:list 36.0pt'><span
     style='mso-bookmark:_Toc112582955'><span lang=EN-US style='mso-ansi-language:
     EN-US'>try and do some error-checking on the inputs, if there are any assumptions
     that the function makes, to help future users avoid making hard-to-debug
     boobs<o:p></o:p></span></span></li>
</ul>

<span style='mso-bookmark:_Toc112582955'></span>

<p class=MsoNormal><a name="_Places_that_can"></a><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<h2><a name="_Toc113346298"></a><a name="_Toc113785435"></a><a
name="_Toc112582924"></a><a name="_Howto's"></a><span style='mso-bookmark:_Toc113346298'><span
style='mso-bookmark:_Toc113785435'><span style='mso-bookmark:_Toc112582924'><span
lang=EN-US style='mso-ansi-language:EN-US'>Do's and don't's</span></span></span></span><span
style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h2>

<h3><span style='mso-bookmark:_Toc112582924'><a name="_Toc113346299"></a><a
name="_Toc113785436"><span style='mso-bookmark:_Toc113346299'><span lang=EN-US
style='mso-ansi-language:EN-US'>Don't access the subj structure directly</span></span></a></span><span
style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h3>

<p><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>See </span></span><a href="#_Accessing_the_subj"><span style='mso-bookmark:
_Toc112582924'><span lang=EN-US style='mso-ansi-language:EN-US'>Accessing the
subj structure directly</span></span><span style='mso-bookmark:_Toc112582924'></span></a><span
style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>.<o:p></o:p></span></span></p>

<p><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>Use the accessor functions in order to evade the ghostly voice that
utters 'I told you so' for weeks after tracking down tricky bugs that the
accessor functions would have precluded.<o:p></o:p></span></span></p>

<h3><span style='mso-bookmark:_Toc112582924'><a name="_Toc113346300"></a><a
name="_Toc113785437"><span style='mso-bookmark:_Toc113346300'><span lang=EN-US
style='mso-ansi-language:EN-US'>Lower-case</span></span></a></span><span
style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h3>

<p><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>Although we have followed the Matlab convention of referring in the
comments help to functions and variables using upper-case, all of the
functions, variables and arguments in the toolbox are lower-case.<o:p></o:p></span></span></p>

<p><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>Try and avoid upper-case whenever using toolbox functions or arguments,
since it could cause a bug that might be difficult to trace.<o:p></o:p></span></span></p>

<h3><span style='mso-bookmark:_Toc112582924'><a name="_Toc113346301"></a><a
name="_Toc113785438"><span style='mso-bookmark:_Toc113346301'><span lang=EN-US
style='mso-ansi-language:EN-US'>Be careful with the subj .x shortcuts</span></span></a></span><span
style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h3>

<p><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>We added a facility for </span></span><a href="#_Getting_the_latest"><span
style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>getting the highest-numbered objects' names</span></span><span
style='mso-bookmark:_Toc112582924'></span></a><span style='mso-bookmark:_Toc112582924'><span
lang=EN-US style='mso-ansi-language:EN-US'>, but we're still not sure if this
is a good idea. If you rely heavily on this, you may accidentally refer to an
unintended object, but it can make life easier too.<o:p></o:p></span></span></p>

<h3><span style='mso-bookmark:_Toc112582924'><a name="_Toc113346302"></a><a
name="_Toc113785439"><span style='mso-bookmark:_Toc113346302'><span lang=EN-US
style='mso-ansi-language:EN-US'>Recommended early pre-processing</span></span></a></span><span
style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h3>

<p><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>See '</span></span><a href="#_What_pre-processing_should"><span
style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>What pre-processing should I do?</span></span><span style='mso-bookmark:
_Toc112582924'></span></a><span style='mso-bookmark:_Toc112582924'><span
lang=EN-US style='mso-ansi-language:EN-US'>'<o:p></o:p></span></span></p>

<p><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></p>

<h2><span style='mso-bookmark:_Toc112582924'><a name="_Toc113346303"></a><a
name="_Toc113785440"><span style='mso-bookmark:_Toc113346303'><span lang=EN-US
style='mso-ansi-language:EN-US'>Common errors and debugging</span></span></a></span><span
style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h2>

<h3><span style='mso-bookmark:_Toc112582924'><a name="_Toc113346304"></a><a
name="_Toc113785441"><span style='mso-bookmark:_Toc113346304'>??? Error using
==&gt; get_number / No &#8230; object called &#8230;</span></a></span></h3>

<p><span style='mso-bookmark:_Toc112582924'>The </span><a
href="m2html/get_number.html"><span style='mso-bookmark:_Toc112582924'>get_number.m</span><span
style='mso-bookmark:_Toc112582924'></span></a><span style='mso-bookmark:_Toc112582924'>
function is one of the central accessor functions that figures out which object
you want, based on its name. A problem with it can usually be traced back to trying
to one of the get or set functions on an object which doesn't exist. So check
for typos, incorrect objtypes etc.</span><span style='mso-bookmark:_Toc112582924'><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></span></p>

<p><span style='mso-bookmark:_Toc112582924'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<h2><span style='mso-bookmark:_Toc112582924'><a name="_Toc113346305"></a><a
name="_Toc113785442"><span style='mso-bookmark:_Toc113346305'><span lang=EN-US
style='mso-ansi-language:EN-US'>Howto's and occasionally-asked questions</span></span></a></span><span
style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h2>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'>This contains a set of scenarios that you might
run into, and ways to achieve simple goals that might come up in your analysis.
In almost all instances, there will be other ways of doing things. These
suggested methods are designed to utilise the toolbox functionality to save you
work. </span></span><a href="#_Contact_details"><span style='mso-bookmark:_Toc112582924'><span
lang=EN-US style='mso-ansi-language:EN-US'>Let us know</span></span><span
style='mso-bookmark:_Toc112582924'></span></a><span style='mso-bookmark:_Toc112582924'><span
lang=EN-US style='mso-ansi-language:EN-US'> if you think you have a better
solution than the one provided.<o:p></o:p></span></span></p>

<p><span style='mso-bookmark:_Toc112582924'><a name="_Data_structures"></a><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<h3><span style='mso-bookmark:_Toc112582924'><a name="_Toc113346306"></a><a
name="_Toc113785443"><span style='mso-bookmark:_Toc113346306'><span lang=EN-US
style='mso-ansi-language:EN-US'>Data structures</span></span></a></span><span
style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></span></h3>

<h4><span style='mso-bookmark:_Toc112582924'>Patterns</span></h4>

<h5><span style='mso-bookmark:_Toc112582924'><a
name="_What_pre-processing_should"></a>What pre-processing should I do?</span></h5>

<p><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>We don't yet have strong recommendations for the pre-processing you
should do on your data. Often, people in the Princeton Psychology Department do
volume registration/motion correction, despiking, detrending (linear and
sometimes quadratic) and sometimes spatial smoothing.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'>If you find that some kinds of pre-processing
steps systematically affect multi-voxel or classification analysis, we'd be
very interested to </span></span><a href="#_Contact_details"><span
style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>hear from you</span></span><span style='mso-bookmark:_Toc112582924'></span></a><span
style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'> for future releases.<o:p></o:p></span></span></p>

<h5><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>What if I want to use Blah<sup>TM</sup> to import my patterns?<o:p></o:p></span></span></h5>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582924'>If you want to use
a different neuroimaging pre-processing package (e.g. BrainVoyager, SPM) then
read the </span><a href="#_Importing"><span style='mso-bookmark:_Toc112582924'>'Importing'</span><span
style='mso-bookmark:_Toc112582924'></span></a><span style='mso-bookmark:_Toc112582924'>
section to see what importing paths are currently supported. If your package of
choice isn't supported, </span><a href="#_Contact_details"><span
style='mso-bookmark:_Toc112582924'>let us know</span><span style='mso-bookmark:
_Toc112582924'></span></a><span style='mso-bookmark:_Toc112582924'>. If you
feel like contributing <i>load_blah_pattern.m</i> and <i>load_blah_mask.m</i>
import functions, that would be even better.</span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582924'>Alternatively, you
may find that your favoured package and one of the supported packages can
read/write each others' format. AFNI and SPM are both pretty versatile, and
many packages are adding support for the new </span><a
href="http://nifti.nimh.nih.gov/"><span style='mso-bookmark:_Toc112582924'>NIfTI</span><span
style='mso-bookmark:_Toc112582924'></span></a><span style='mso-bookmark:_Toc112582924'>
format.</span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582924'>Finally, if you
just want to read in data from some other source entirely, then that's easy. As
long as you can get the data into Matlab as a 2D (nFeatures x nTimepoints)
matrix, then you can simply call </span><a href="m2html/init_object.m"><span
style='mso-bookmark:_Toc112582924'><i>init_object.m</i></span><span
style='mso-bookmark:_Toc112582924'></span></a><span style='mso-bookmark:_Toc112582924'>
and then </span><a href="m2html/set_mat.html"><span style='mso-bookmark:_Toc112582924'><i>set_mat.m</i></span><span
style='mso-bookmark:_Toc112582924'></span></a><span style='mso-bookmark:_Toc112582924'>
to create a new pattern object and insert your matrix into it. You should also
read </span><a href="#_How_do_I_2"><span style='mso-bookmark:_Toc112582924'>'How
do I create a pattern without a mask?'</span><span style='mso-bookmark:_Toc112582924'></span></a><span
style='mso-bookmark:_Toc112582924'> if you're going to do this.</span></p>

<h5><span style='mso-bookmark:_Toc112582924'><a name="_How_do_I_2"></a>How do I
create a pattern without a mask?</span></h5>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span
style='mso-bookmark:_Toc112582924'>The toolbox intentionally makes this hard to
do. There's a good reason for this &#8211; if you want to know where a feature/voxel
in your pattern came from, or find the same voxel in two patterns that have
been differently masked, then you need to have a common reference space that
you can map between. A pattern without an associated mask contains anonymous,
untraceable features.</span></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span
style='mso-bookmark:_Toc112582924'>If that's what you really want, or you just
want to try something quick and dirty, the easiest work-around is to just
create a place-holder mask:</span></p>

<div style='border:solid windowtext .25pt;padding:6.0pt 3.0pt 6.0pt 3.0pt'>

<p class=Code><span style='mso-bookmark:_Toc112582924'>&gt;&gt; nFeatures =
100;</span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'>&gt;&gt; subj =
init_object(subj,'mask','placeholder');</span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'>&gt;&gt; placeholder =
ones([1 1 nFeatures]);</span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'>&gt;&gt; subj =
set_mat(subj,'mask','placeholder',placeholder);</span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'>&gt;&gt; subj =
init_object(subj,'pattern','my_pattern');</span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'>&gt;&gt; subj =
set_objfield(subj,'pattern',new_patname,'masked_by','placeholder');</span></p>

</div>

<h5><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>How do I figure out which features are common to two patterns?<o:p></o:p></span></span></h5>

<p><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>This isn't much harder than finding the common voxels in two masks.
Since each pattern has a <i>masked_by</i> field, start by extracting the masks
used by your two patterns.<o:p></o:p></span></span></p>

<div style='border:solid windowtext .25pt;padding:6.0pt 3.0pt 6.0pt 3.0pt'>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'>&gt;&gt; mask1_name =
get_objfield(subj,'pattern','pat1','masked_by');<o:p></o:p></span></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'>&gt;&gt; mask2_name = get_objfield(subj,'pattern','pat2','masked_by');<o:p></o:p></span></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'>&gt;&gt; mask2 = get_mat(subj,'mask','mask2');<o:p></o:p></span></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'>&gt;&gt; common_voxels = mask1 &amp; mask2;<o:p></o:p></span></span></p>

</div>

<p><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>Now, just refer to ' </span></span><a href="#_How_do_I_1"><span
style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>How do I figure out which voxels are common to two masks?</span></span><span
style='mso-bookmark:_Toc112582924'></span></a><span style='mso-bookmark:_Toc112582924'><span
lang=EN-US style='mso-ansi-language:EN-US'>' to compare the two masks.<o:p></o:p></span></span></p>

<h5><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>How do I exclude features from a pattern?<o:p></o:p></span></span></h5>

<p><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>Don't just delete the features and then call <i>set_mat.m</i>. In fact,
if you do, it will warn you that the dimensions of the new mat are different.
This is an indication that what you are doing isn't a good idea.<o:p></o:p></span></span></p>

<p><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>Instead, you should create a mask with just the features you want, and
then create a new pattern that is masked by your new mask. This may seem like a
lot of work, but there's a very good reason for it. As discussed in '</span></span><a
href="#_Figuring_out_which"><span style='mso-bookmark:_Toc112582924'><span
lang=EN-US style='mso-ansi-language:EN-US'>Figuring out which voxel is which,
and where</span></span><span style='mso-bookmark:_Toc112582924'></span></a><span
style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>', a pattern doesn't contain any information about its features except
their values. If you want to compare voxels from different-sized patterns, or
figure out where in the brain the features come from, you need to use a mask as
a reference space. That is why every pattern has a <i>masked_by</i> field,
pointing to a mask with the right number of active voxels.<o:p></o:p></span></span></p>

<p><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>The following snippet should give you an idea of what you need to do, if
you want to delete the 100th voxel from the <i>epi_wholebrain</i> pattern which
is masked by the <i>wholebrain</i> mask. It first creates a new <i>wholebrain2</i>
mask, sets the 100th voxel in that to 0, then calls </span></span><a
href="m2html/create_pattern_from_mask.html"><span style='mso-bookmark:_Toc112582924'><i><span
lang=EN-US style='mso-ansi-language:EN-US'>create_pattern_from_mask.m</span></i></span><span
style='mso-bookmark:_Toc112582924'></span></a><span style='mso-bookmark:_Toc112582924'><i><span
style='mso-ansi-language:EN-US'> </span></i></span><span style='mso-bookmark:
_Toc112582924'><span lang=EN-US style='mso-ansi-language:EN-US'>to do the hard
work of creating a new <i>epi_wholebrain2 </i>pattern that will be masked by <i>wholebrain2</i>,
and so lack the 100th voxel.<o:p></o:p></span></span></p>

<div style='border:solid windowtext .25pt;padding:6.0pt 3.0pt 6.0pt 3.0pt'>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'>&gt;&gt; subj =
duplicate_object(subj,'mask','wholebrain','wholebrain2');<o:p></o:p></span></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'>&gt;&gt; wholebrain2 =
get_mat(subj,'mask','wholebrain2');<o:p></o:p></span></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'>&gt;&gt; wb_idx = find(wholebrain2);<o:p></o:p></span></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'>&gt;&gt; vox_to_delete = wb_idx(100);<o:p></o:p></span></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'>&gt;&gt; wholebrain2(vox_to_delete) = 0;<o:p></o:p></span></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'>&gt;&gt; subj =
set_mat(subj,'mask','wholebrain2',wholebrain2);<o:p></o:p></span></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'>&gt;&gt; subj =
create_pattern_from_mask(subj,'epi_wholebrain','wholebrain2','epi_wholebrain2');<o:p></o:p></span></span></p>

</div>

<p><span style='mso-bookmark:_Toc112582924'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<h4><span style='mso-bookmark:_Toc112582924'><a name="_Masks"></a><span
lang=EN-US style='mso-ansi-language:EN-US'>Regressors<o:p></o:p></span></span></h4>

<h5><span style='mso-bookmark:_Toc112582924'>How can I exclude conditions from
my analysis?</span></h5>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582924'>See:
Pre-classification </span><a href="#_How_can_I_2"><span style='mso-bookmark:
_Toc112582924'>'How can I exclude conditions from my analysis'</span><span
style='mso-bookmark:_Toc112582924'></span></a><span style='mso-bookmark:_Toc112582924'></span></p>

<h5><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>How should I take the hemodynamic response into account?<o:p></o:p></span></span></h5>

<p><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>You can use </span></span><a href="m2html/shift_TRs.html"><span
style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>shift_TRs.m</span></span><span style='mso-bookmark:_Toc112582924'></span></a><span
style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'> if you'd like to shunt your regressors along to account for the
hemodynamic lag in a really simplistic way.<o:p></o:p></span></span></p>

<p><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>You could also try using non-binary regressors that have been convolved
with a hemodynamic response function as targets for your classifier, but this
needs some thought, as neural networks struggle to learn continuous-valued
targets with a logistic sigmoidal activation function in the output layer.<o:p></o:p></span></span></p>

<p><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>We are looking into more sophisticated ways of dealing with this, and
would be </span></span><a href="#_Contact_details"><span style='mso-bookmark:
_Toc112582924'><span lang=EN-US style='mso-ansi-language:EN-US'>happy to hear
from you</span></span><span style='mso-bookmark:_Toc112582924'></span></a><span
style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'> if you have made progress with this.<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></p>

<h4><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>Masks<o:p></o:p></span></span></h4>

<h5><span style='mso-bookmark:_Toc112582924'><a name="_How_do_I_1"></a><span
lang=EN-US style='mso-ansi-language:EN-US'>How do I figure out which voxels are
common to two masks?<o:p></o:p></span></span></h5>

<p><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>This is very easy. Since masks are boolean 3D matrices, you could just
try:<o:p></o:p></span></span></p>

<div style='border:solid windowtext .25pt;padding:6.0pt 3.0pt 6.0pt 3.0pt'>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'>&gt;&gt; mask1 = get_mat(subj,'mask','mask1');<o:p></o:p></span></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'>&gt;&gt; mask2 = get_mat(subj,'mask','mask2');<o:p></o:p></span></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></p>

<p class=Code><span style='mso-bookmark:_Toc112582924'><span lang=EN-US
style='mso-ansi-language:EN-US'>&gt;&gt; common_voxels = mask1 &amp; mask2;<o:p></o:p></span></span></p>

</div>

<p><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'>That will produce a third boolean 3D matrix, with 1s where both <i>mask1</i>
and <i>mask2</i> had 1s. You could then create a new <i>common_voxels</i> mask
object, and use this to mask a pattern using </span></span><a
href="m2html/create_pattern_from_mask.html"><span style='mso-bookmark:_Toc112582924'><i><span
lang=EN-US style='mso-ansi-language:EN-US'>create_pattern_from_mask.m</span></i></span><span
style='mso-bookmark:_Toc112582924'></span></a><span style='mso-bookmark:_Toc112582924'><span
lang=EN-US style='mso-ansi-language:EN-US'>.<o:p></o:p></span></span></p>

<p><span style='mso-bookmark:_Toc112582924'><span lang=EN-US style='mso-ansi-language:
EN-US'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></span></p>

<span style='mso-bookmark:_Toc112582924'></span>

<h5><a name="_How_do_I"></a>How do I find the coordinates of active voxels in a
mask?</h5>

<p>The <i>mat</i> of a mask object is a 3D boolean object. If you would like an
(<i>nVox</i> x <i>3</i>) matrix of <i>x</i>/<i>y</i>/<i>z</i> Cartesian
coordinates listing those voxels that are active in the volume:</p>

<div style='border:solid windowtext .25pt;padding:6.0pt 3.0pt 6.0pt 3.0pt'>

<p class=Code>&gt;&gt; mymask = get_mat(subj,'mask','mymaskname');</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; mycoords = ind2sub(size(mymask),find(mymask)); %
untested xxx</p>

</div>

<p><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<h3 style='tab-stops:122.0pt'><a name="_Toc113346307"></a><a
name="_Toc113785444"><span style='mso-bookmark:_Toc113346307'>Importing</span></a></h3>

<p class=MsoNormal>No questions so far</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<h3 style='tab-stops:122.0pt'><a name="_Toc113346308"></a><a
name="_Toc113785445"><span style='mso-bookmark:_Toc113346308'>Pre-classification</span></a></h3>

<h4>How can I handpick timepoints to exclude from my analysis?</h4>

<p>Don't delete any TRs from your patterns or regressors. Instead, just tell <i>create_xvalid_indices.m</i>
to use a selector as a kind of temporal mask to censor out the timepoints you
don't want. Imagine you have 1000 TRs, and you want to exclude the 111th
(because that's the point in your experiment where Bilbo disappears):</p>

<div style='border:solid windowtext .25pt;padding:6.0pt 3.0pt 6.0pt 3.0pt'>

<p class=Code>&gt;&gt; nTRs = 1000;</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; temp_sel= ones(1,nTRs);</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; temp_sel(111) = 0;</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; subj = init_object(subj,'selector','no_bilbo');</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; subj = set_mat(subj,'selector',no_bilbo',temp_sel);</p>

</div>

<p class=MsoNormal>Now, when you call <i>create_xvalid_indices.m</i>, feed in
the <i>no_bilbo</i> selectors object as the <i>actives_selname</i>:</p>

<div style='border:solid windowtext .25pt;padding:6.0pt 3.0pt 6.0pt 3.0pt'>

<p class=Code>&gt;&gt; subj = create_xvalid_indices(subj,'runs', ...</p>

<p class=Code><span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>'actives_selname','no_bilbo');<span style='color:red'><o:p></o:p></span></p>

</div>

<p><a name="_How_can_I"></a>Note: this method will only exclude these
timepoints from functions that use the <i>create_xvalid_indices.m</i>. They
still exist in regressors or patterns or other objects. It's just that they
will be ignored when creating the cross-validation selector group that gets
used for feature selection and classification later on. Early functions like <i>zscore_runs.m</i>
that don't use the cross-validation selector group will still include these
timepoints. This is deliberate, since we recommend that you include all your
TRs when zscoring.</p>

<p>The main advantage of this method is that it doesn't require you to actually
delete the TRs that you don't want from your patterns, so that if you change
your mind, you can easily rerun your analysis by feeding in a different <i>actives_selname</i>
selector to <i>create_xvalid_indices.m</i>.</p>

<h4><a name="_How_can_I_1"></a>How can I exclude rest timepoints from my
analysis?</h4>

<p>First, read '<a href="#_How_do_I">How can I handpick timepoints to exclude
from my analysis?</a>'.</p>

<p>This time, instead of hand-picking the timepoints to exclude individually,
you want to exclude all the timepoints in your regressors matrix that don't
have an active condition. As above, this simply involves setting those
timepoints in your <i>actives_selname</i> selector to 0. For instance:</p>

<div style='border:solid windowtext .25pt;padding:6.0pt 3.0pt 6.0pt 3.0pt'>

<p class=Code>&gt;&gt; regs = get_mat(subj,'regressors','my_conds');</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; temp_sel = ones(1,size(regs,2));</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; temp_sel(find(sum(regs)==0)) = 0;</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; subj = init_object(subj,'selector','no_rest');</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; subj = set_mat(subj,'selector',no_rest',temp_sel);</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; subj = create_xvalid_indices(subj,'runs','actives_selname','no_rest');</p>

</div>

<h4><a name="_How_can_I_2"></a>How can I exclude conditions from my analysis?</h4>

<p>We recommend using the same method as described first in '<a
href="#_How_do_I">How can I handpick timepoints to exclude from my analysis?</a>'
and elaborated in '<a href="#_How_can_I_1">How can I exclude rest timepoints
from my analysis?</a>'.</p>

<p>The only difference here is that we are going to create a new regressors
matrix with a reduced number of condition-rows beforehand. First, create a new
regressors object by duplicating the current set of regressors. Then remove the
appropriate condition-rows from the new regressors, and the appropriate
condition-name string from the <i>condnames</i> field. For example, to create a
new regressors object called <i>regs_no_3 </i>that lacks the third condition
from <i>regs_original</i>. </p>

<div style='border:solid windowtext .25pt;padding:6.0pt 3.0pt 6.0pt 3.0pt'>

<p class=Code>&gt;&gt; subj =
duplicate_object(subj,'regressors','regs_original','regs_no_3');</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; regs_no_3_mat = get_mat(subj,'regressors','regs_no_3');</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; regs_no_3_mat(3,:) = [];</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; subj = set_mat(subj,'regressors','regs_no_3',regs_no_3_mat);</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; condnames_no_3 =
get_objfield(subj,'regressors','regs_no_3','condnames');</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; condnames_no_3(3) = [];</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; subj =
set_objfield(subj,'regressors','regs_no_3','condnames',condnames_no_3);</p>

</div>

<p>Now, <i>regs_no_3</i> will contain as many timepoints as <i>regs_original</i>,
but fewer condition-rows, and more 'rest timepoints', i.e. timepoints with no
active conditions. Now, we can just proceed as described above for <a
href="#_How_can_I_1">excluding rest</a> from your analysis to ensure that those
'rest' timepoints are ignored when generating the statmap and doing
classification. In other words, the third condition won't feature at all in any
steps of the analysis that use selectors in the group created by <i>create_xvalid_indices.m</i>.</p>

<p>Proceeding from now on exactly as described in '<a href="#_How_can_I_1">How
can I exclude rest timepoints from my analysis?</a>':</p>

<div style='border:solid windowtext .25pt;padding:6.0pt 3.0pt 6.0pt 3.0pt'>

<p class=Code>&gt;&gt; regs = get_mat(subj,'regressors','my_conds');</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; temp_sel = ones(1,size(regs_no_3,2));</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; temp_sel(find(sum(regs_no_3)==0)) = 0;</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; subj = init_object(subj,'selector','sel_no_3');</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; subj = set_mat(subj,'selector',sel_no_3',temp_sel);</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; subj =
create_xvalid_indices(subj,'runs','actives_selname','sel_no_3');</p>

</div>

<h4><a name="_Toc113346309"></a><a name="_Classification_1"></a><span
style='mso-bookmark:_Toc113346309'>How can I exclude rest and hand-picked timepoints
and some conditions?</span></h4>

<p class=MsoNormal><span style='mso-bookmark:_Toc113346309'>Create a separate
boolean temporal mask selector for each, as above. Then create a new selector
that is the 'AND' of all of those selectors, and feed that in.</span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc113346309'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<h3><span style='mso-bookmark:_Toc113346309'><a name="_Toc113785446">Classification</a></span></h3>

<h4>Why is my generalization performance poor?</h4>

<p class=MsoNormal>See: <a href="#_Troubleshooting_poor_classification">Troubleshooting
poor classification performance</a>.</p>

<h4>How do I find the weights that backprop has learned?</h4>

<p class=MsoNormal>If you're using the Mathworks Neural Networks toolbox,
they're stored in the <i>net</i> (that gets saved to <i>results.iterations(i).scratchpad</i>)
object in the 'weight and bias values' section. See the <a
href="http://www.mathworks.com/access/helpdesk/help/toolbox/nnet/nnet.shtml">Matlab
Neural Networks manual</a> for more information.</p>

<p class=MsoNormal>See the <a href="http://www.ncrg.aston.ac.uk/netlab/">Netlab</a>
mlp.m help (and also <a href="http://www.phys.uni.torun.pl/netlab/mlp.htm">here</a>)
for more information about where the Netlab <i>net</i> object stores the
weights matrix or matrices.</p>

<h4>What if I want to train or test on averaged data?</h4>

<p class=MsoNormal>If you want to train <i>and</i> test on averaged data, then
the easiest thing to do would be to average all of your patterns, regressors
and selectors, and just run the analysis as normal with the averaged data.</p>

<p class=MsoNormal>If you're trying to train on single TRs but test on averaged
data, things are a little more complicated. There are two main solutions.</p>

<p class=MsoNormal style='margin-left:18.0pt;text-indent:-18.0pt;mso-list:l7 level1 lfo30;
tab-stops:list 18.0pt'><![if !supportLists]>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><![endif]>Implement the averaging inside your training or testing
function. This is easy to do.</p>

<p class=MsoNormal style='margin-left:18.0pt;text-indent:-18.0pt;mso-list:l7 level1 lfo30;
tab-stops:list 18.0pt'><![if !supportLists]>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><![endif]>Have one copy of your pattern, regressors and mask that's
unaveraged, and one copy that's averaged. Then, you'd have to either hack
cross_validation.m, or maybe feed in the data that you want to use in through
the extra arguments of the training/testing functions.</p>

<p class=MsoNormal style='margin-left:18.0pt'>If you're planning to do this,
let us know and we'll try and help, since averaging definitely helps and this
functionality will be useful to others.</p>

<h4><a name="_My_classifier_sometimes"></a>My classifier sometimes hangs in the
srchcha bit of the algorithm &#8211; why?</h4>

<p>See: <a
href="http://newsreader.mathworks.com/WebX?50@482.SFQaa3hT5tQ.0@.eefecf2">http://newsreader.mathworks.com/WebX?50@482.SFQaa3hT5tQ.0@.eefecf2</a></p>

<p>We've experienced this problem occasionally and we never found a solution.
Please <a href="mailto:mvpa_support@princeton.edu">contact us</a> if you think
you're having this problem so that we can help Mathworks debug the problem with
as many examples as possible &#8211; better still, let us know if you fix it&#8230;</p>

<p>Update [ELN]: Try using a different training function (e.g. <i>trainscg</i>
instead of <i>traincgb</i>) &#8211; just change the <i>alg</i> field of the <i>class_args</i>
that you feed into <i>cross_validation.m</i>:</p>

<div style='border:solid windowtext .25pt;padding:6.0pt 3.0pt 6.0pt 3.0pt'>

<p class=Code>&gt;&gt; class_args.train_funct_name = 'train_bp';</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; class_args.test_funct_name = 'test_bp';</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; class_args.nHidden = 0;</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; class_args.alg = 'trainscg';</p>

<p class=Code>etc.</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code>&gt;&gt; [subj results] = cross_validation(blahblahblah&#8230;);</p>

</div>

<p>A little more background to what these functions are:</p>

<p>When<span style="mso-spacerun: yes">&nbsp; </span>a network hangs, or never
finishes training it is commonly due to the function <i>srchcha.m</i> entering
into a never-satisfied while-loop.<span style="mso-spacerun: yes">&nbsp;
</span>srchcha is a line search function used by the default training algorithm
in the toolbox called <i>traincgb</i>. This is a powerful and effective
training algorithm that looks for the direction of the steepest gradient and
then performs a line search in the direction of that gradient to decide how far
in that direction to adjust the weights. <i>Traincgb</i> is an example of a
conjugate training algorithm, meaning it uses information about the direction
of steepest descent from previous epochs to guide the learning on the current
epoch. Conjugate training algorithms (accoding to Mathworks) converge faster
than other training algorithms and thus are nice to use.<span
style="mso-spacerun: yes">&nbsp; </span>Another such algorithm is <i>trainscg</i>
&#8211; a major difference however is that this function does not use a line search
algorithm to determine the next weight update and thus avoids the problem of
hanging nets.</p>

<p>See the <a
href="http://www.mathworks.com/access/helpdesk/help/toolbox/nnet/backpr14.html#3826">comparison</a>
in the Backpropagation chapter of the <a
href="http://www.mathworks.com/access/helpdesk/help/toolbox/nnet/nnet.html">Matlab
NN toolbox manual</a> for more information.</p>

<h4>Why do I sometimes get a divide-by-zero error when training?</h4>

<p class=MsoNormal>We believe that this just means that your performance is
improving very very slowly with training, and so when the neural network algorithm
tries to calculate the gradient of its performance improvement, it's dividing
by zero. So, we don't <i>think</i> it indicates a major problem. If you want to
get rid of it, make your stopping criteria a little more strict, or try the
solution described in '<a href="#_My_classifier_sometimes">My classifier
sometimes hangs in the srchcha bit of the algorithm &#8211; why?</a>'.</p>

<h3><a name="_Toc113346310"></a><a name="_Toc113785447"><span style='mso-bookmark:
_Toc113346310'>Exporting</span></a></h3>

<p class=MsoNormal>No questions so far</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

</div>

</body>

</html>
