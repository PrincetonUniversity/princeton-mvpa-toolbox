<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=iso-8859-1">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 9">
<meta name=Originator content="Microsoft Word 9">
<link rel=File-List href="./whatnext_files/filelist.xml">
<title>Princeton multi-voxel pattern analysis tutorial</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Greg Detre</o:Author>
  <o:LastAuthor>Greg Detre</o:LastAuthor>
  <o:Revision>514</o:Revision>
  <o:TotalTime>2556</o:TotalTime>
  <o:Created>2005-08-18T08:37:00Z</o:Created>
  <o:LastSaved>2005-09-01T17:49:00Z</o:LastSaved>
  <o:Pages>3</o:Pages>
  <o:Words>735</o:Words>
  <o:Characters>4193</o:Characters>
  <o:Company>-</o:Company>
  <o:Lines>34</o:Lines>
  <o:Paragraphs>8</o:Paragraphs>
  <o:CharactersWithSpaces>5149</o:CharactersWithSpaces>
  <o:Version>9.2720</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:Zoom>150</w:Zoom>
 </w:WordDocument>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:1627421319 -2147483648 8 0 66047 0;}
 /* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h1
	{margin-right:0cm;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:1;
	font-size:24.0pt;
	font-family:"Times New Roman";
	mso-font-kerning:18.0pt;
	font-weight:bold;}
h2
	{margin-right:0cm;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:2;
	font-size:18.0pt;
	font-family:"Times New Roman";
	font-weight:bold;}
h3
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:3;
	font-size:13.0pt;
	font-family:"Times New Roman";
	mso-bidi-font-family:Arial;
	font-weight:bold;}
h4
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:4;
	font-size:14.0pt;
	font-family:"Times New Roman";
	font-weight:bold;}
p.MsoNormalIndent, li.MsoNormalIndent, div.MsoNormalIndent
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoFootnoteText, li.MsoFootnoteText, div.MsoFootnoteText
	{margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
span.MsoFootnoteReference
	{vertical-align:super;}
p.MsoBodyText, li.MsoBodyText, div.MsoBodyText
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoBodyTextIndent, li.MsoBodyTextIndent, div.MsoBodyTextIndent
	{margin-right:0cm;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoBodyTextIndent2, li.MsoBodyTextIndent2, div.MsoBodyTextIndent2
	{margin-right:0cm;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoBodyTextIndent3, li.MsoBodyTextIndent3, div.MsoBodyTextIndent3
	{margin-top:4.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:72.0pt;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoBlockText, li.MsoBlockText, div.MsoBlockText
	{margin-top:0cm;
	margin-right:72.0pt;
	margin-bottom:6.0pt;
	margin-left:72.0pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;
	text-underline:single;}
p.MsoDocumentMap, li.MsoDocumentMap, div.MsoDocumentMap
	{margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	background:navy;
	font-size:12.0pt;
	font-family:Tahoma;
	mso-fareast-font-family:"Times New Roman";}
p
	{margin-right:0cm;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.Code, li.Code, div.Code
	{mso-style-name:Code;
	mso-style-parent:"Normal \(Web\)";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	border:none;
	mso-border-alt:solid windowtext .25pt;
	padding:0cm;
	mso-padding-alt:6.0pt 3.0pt 6.0pt 3.0pt;
	font-size:10.0pt;
	mso-bidi-font-size:12.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
@page Section1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;
	mso-header-margin:36.0pt;
	mso-footer-margin:36.0pt;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
@list l0
	{mso-list-id:1672096466;
	mso-list-type:hybrid;
	mso-list-template-ids:-498173930 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	margin-left:72.0pt;
	text-indent:-18.0pt;
	font-family:Symbol;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
</head>

<body lang=EN-GB link=blue vlink=purple style='tab-interval:36.0pt'>

<div class=Section1>

<h1>Princeton multi-voxel pattern analysis &#8211; what next?</h1>

<p align=right style='text-align:right'><a
href="http://www.csbmb.princeton.edu/mvpa">http://www.csbmb.princeton.edu/mvpa</a></p>

<p><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p>You've effortlessly floated through <a href="tutorial_easy.htm">tutorial_easy.htm</a>,
and now you're looking for something to get your teeth into. Here are some
ideas.</p>

<p>Grab a data set and try rewriting <i>tutorial_easy.m</i> to work with your
data. If it's AFNI, it should be pretty easy. If it's BV, we'll have to talk
because that import path isn't quite up and running yet. There are lots of <a
href="#_Things_to_test">tests that we want to run</a> to ensure that things are
working exactly as they should. Check out the howto's section in the <a
href="manual.htm">manual</a> for ideas about how to implement some of the
trickier suggestions.</p>

<p>If there's functionality that you need and want to <a
href="#_Scripting_help_&#8211;">contribute some scripts</a> to be released as part of
the toolbox, that would be phenomenal. Note that there are a few <a
href="#_Planned_improvements">planned improvements</a> already on the table.</p>

<p>If you have worked with old versions of the toolbox in the past, then try <a
href="#_Comparing_old_and">comparing the old and new</a> versions of your data
to see if the new toolbox gives you all the same results as the old.</p>

<p><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<h2><a name="_Things_to_test"></a>Things to test with your data set</h2>

<p>Are the results of <i>statmap_anova.m</i> right? That is, if you look at
individual voxels' timecourses, does it look as though statmap_anova.m is
picking out voxels that do vary significantly. If you call <i>anova1.m</i> (or
a home-grown anova script) manually, does it give the same result for a given
voxel as <i>statmap_anova.m</i>?</p>

<p>Try writing the statmap to AFNI with <i>write_to_afni.m</i>. Does it look
sensible? It'll probably look speckly and non-specific &#8211; that's why we want to
work on new voxel-selection and masking methods</p>

<p>Check that combining patterns/masks that are the result of multiple masking
steps correctly keeps track of the voxels &#8211; see 'Howto's / Data structures /
Patterns' and 'Masks' in the manual</p>

<p>Look for aberrant spikes in the data, and see whether excluding them with
the <i>actives_selname</i> selector in <i>create_xvalid_indices.m</i> helps</p>

<p>Try shifting 2 or 3 TRs to see if it helps classification &#8211; <i>shift_TRs.m</i></p>

<p>Compare with/without hidden layer classification performance</p>

<p>Confirm that the <i>move_pattern_to_hd.m</i> mechanism is robust. Try
calling it on various kinds of patterns, loading it in and out, accessing it as
though it's part of the <i>subj</i> structure with get and set calls. Check
that the <i>matsize</i> field is updated, and that <i>summarize.m</i> displays
things properly. See what happens if you delete the file. Just try and break
things.</p>

<p>Play around with the sample dataset to confirm that it is yielding similar
results to Haxby et al. (2001). This might not work, since I'm not sure what
pre-processing was applied to this data, where the beta weights are stored etc
&#8211; contact <a href="mailto:mvpa_support@princeton.edu">me</a> if things are
weird.</p>

<p>Reality checks:</p>

<p style='margin-top:4.0pt;margin-left:72.0pt;text-indent:-18.0pt;mso-list:
l0 level1 lfo2;tab-stops:list 72.0pt'><![if !supportLists]><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>Confirm that classification fails when the regressors
are scrambled</p>

<p style='margin-top:4.0pt;margin-left:72.0pt;text-indent:-18.0pt;mso-list:
l0 level1 lfo2;tab-stops:list 72.0pt'><![if !supportLists]><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>Compare using <i>feature_select.m</i> and <i>peek_feature_select.m</i>.
The latter should be better, but not too much better</p>

<p style='margin-top:4.0pt;margin-left:72.0pt;text-indent:-18.0pt;mso-list:
l0 level1 lfo2;tab-stops:list 72.0pt'><![if !supportLists]><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>Confirm that classification is much worse with a
randomly defined mask</p>

<p>Try training on a subset of your conditions &#8211; see the 'Howto's / Pre-classification'
section in the manual</p>

<p>Compare anatomically-defined and ANOVA-defined masks</p>

<p>Does the new <i>load_afni_pattern.m</i> give exactly the same results as the
old <i>AFNItoSubj.m</i>?</p>

<p><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<h2><a name="_Scripting_help_&#8211;"></a>Scripting help &#8211; adding new functionality</h2>

<p>See whether a modified version of <i>zscore_runs.m</i> does as well if all
it does is divide by the standard deviation (i.e. doesn't subtract the mean).</p>

<p>Update class_bp_netlab.m</p>

<p>Update our existing correlation-based classifier</p>

<p>Deal with the beta weights in the sample data sets and run a parallel
classification analysis with them</p>

<p>Update Sean's unpacking function, which trains multiple classifiers and
averages their weights to get a sense of which voxels are linked to which
conditions</p>

<p><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<h2><a name="_Comparing_old_and"></a>Comparing old and new versions of the
toolbox</h2>

<p>Does the new <i>statmap_anova.m</i> give <i>exactly</i> the same results as
the old <i>anovaVox.m</i> script? We implemented no-peeking functionality in
the old scrpits, but it was kind of a hack, so you might have to just choose
all but one of your runs, and run the anova on that, in order to compare old
and new (since the new feature_select.m is no-peeking).</p>

<p>Check that the new <i>train_bp.m</i> and <i>test_bp.m</i> scripts work the
same way as the old <i>class_bp.m</i>. Check that hidden layers work as they
should, that it trains at about the same speed, that the patterns and targs
themselves look about right, and that the <i>perf_maxclass.m</i> performance
metric is calculating things correctly.</p>

<p><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<h2><a name="_Planned_improvements"></a>Planned improvements</h2>

<p class=MsoNormal>People have expressed an interest in contributing in these
areas:</p>

<p>We need to revamp the BrainVoyager import and export scripts. I can do the revamping
but testing whether it works as it should is really important. [Jason Chein]</p>

<p>Write a more powerful version of <i>statmap_anova.m</i> to include runs as a
factor [Susan Robison]</p>

<p>Functionality for looking for contiguous clusters of voxels in a mask [Matt Weber]</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p style='margin:0cm;margin-bottom:.0001pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

</div>

</body>

</html>
